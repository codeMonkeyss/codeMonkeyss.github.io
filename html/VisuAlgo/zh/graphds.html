<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="description" content="图形由顶点/节点和连接这些顶点的边/线组成。图可以是无向的（意味着在与每个双向边相关联的两个顶点之间没有区别）或者可以指向图（意味着其边缘从一个顶点指向另一个顶点但不一定在另一个方向上）。可以对图形进行加权（通过向每个边缘分配权重，其表示与该连接相关联的数值）或者图形可以是未加权的（所有边缘具有单位权重1或者所有边缘具有相同的恒定权重）。">
<meta name="keywords" content="图形 邻接矩阵 邻接列表 边缘列表&lt;br&gt;">
 
<meta name="csrf-token" content="kaTPcaTtnnJPvGspW7LRTya6UONjjAL7yXZSCSBh">
<meta http-equiv="X-UA-Compatible" content="IE=EDGE">
<meta property="og:image" content="../img/png/graphds.png">
<title>VisuAlgo - 图形据结构（邻接矩阵，邻接列表，边缘列表）&lt;br&gt;</title>
<link rel="icon" href="../img/favicon.png" type="image/x-icon">
<link rel="shortcut icon" href="../img/favicon.png" type="image/x-icon">
<link rel="apple-touch-icon" href="../img/favicon.png">
<link rel="apple-touch-icon" sizes="72x72" href="../img/favicon.png">
<link rel="apple-touch-icon" sizes="114x114" href="../img/favicon.png">
<link rel="stylesheet" type="text/css" href="../fonts/silkscreen/stylesheet.css">
<link rel="stylesheet" type="text/css" href="../css/common.css">
<link rel="stylesheet" href="../css/viz-1.0.1.css">
<link rel="stylesheet" href="../css/visual.css">
<link rel="stylesheet" href="../css/drawgraph.css">
<style>
      #e-lecture {
        top: 45px;
        right: 130px;
        width: 400px;
        display: block;
        background: none;
        /*overflow: normal;*/
        white-space: normal;
        text-align: right;
        color: black; font-weight: bold; font-size: 20px;
      }
      .electure-prev, .electure-next { /* force update, copied from viz.css */
        position: absolute;
        /* bottom: -12px; */
        top: -20px;
        /*bottom: '';*/
        padding: 3px 8px;
        background: #999;
        color: white;
        cursor: pointer;
        border-radius: 2px;
      }
      .electure-prev {
        left: -10px;
        /* right: 30px; */
      }
      .electure-next {
        right: -10px;
        color: white;
      }
    </style>
<style>
svg {
  border: 2px solid;
  background-color: #eeeeee;
  cursor: default;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  -o-user-select: none;
  user-select: none;
}
 
svg:not(.active):not(.ctrl) {
  cursor: crosshair;
}
 
path.link {
  fill: none;
  stroke: #333;
  stroke-width: 4.3px;
  cursor: default;
}
 
svg:not(.active):not(.ctrl) path.link {
  cursor: pointer;
}
 
path.link.selected {
  stroke-dasharray: 10,2;
}
 
path.link.dragline {
  pointer-events: none;
}
 
path.link.hidden {
  stroke-width: 0;
}
 
circle.node {
  stroke: #333;
  stroke-width: 2px;
  cursor: pointer;
}

text {
  font-family: sans-serif;
  font-size: 16px;
  font-weight: bold;
  pointer-events: none;
}

text.weight {
  cursor: pointer;
  font-weight: bold;
  text-anchor: middle;
}

text.id {
  text-anchor: middle;
  font-weight: bold;
}

.tableTitle {
  width: 100%;
  background-color: #009900;
  color: #ffffff;
  font-family: Arial;
  font-size: 14px;
  font-weight: bold;
  text-align: center;
}

.graphTable {
  border-collapse: collapse;
  border-spacing: 0;
}

.graphTable td {
  border-width: 0px 1px 1px 0px;
  border: 1px solid #000000;
  text-align: center;
  padding : 0;
}

.graphTable tr:hover {
  background-color: #ffffff;
}

#VandE, #IsTree, #IsComplete, #IsBipartite, #IsDAG {
  font-family: Arial;
  font-size:14px;
}

.bold { font-weight: bold; }
.red { background-color: red; opacity: 0.3; }
</style>
<script>
      function changeURL() {
        var URL = window.location.href.split('/');
        var val = document.getElementById("Language").value;
        URL[3] = val;
        window.location.assign(URL.join('/'));
      }
    </script>
</head>
<body>
<div id="top-bar">
<a id="home" href="/">Visu<span class="colour">Algo</span><span style="font-size: 40%">.net</span></a>
/
<select id="Language" onchange="changeURL()">
<option value="zh" selected>zh</option>
</select>
/graphds
<span id="title">
<a id='menu1' class='selected-viz'>无方向的/无权重的</a>
<a id='menu2'>U/W</a>
<a id='menu3'>D/U</a>
<a id='menu4'>D/W</a>
</span>
<div id="mode-menu">
<div id='mode-button' title='exploration'>示例模式 &#9663;</div>
<div id='other-modes'>
<a title='e-Lecture'>电子讲座模式</a>
</div>
</div>
</div>
<div id="dark-overlay"></div>
<div id="left-bar"></div>
<div id="right-bar"></div>
<div id='e-lecture' class='panel'></div>
<div id="overlay" hidden></div>
<div id="dropdown-temp-holder" hidden></div>
<div id="electure-1" class="electure-dialog" style="top:60px;left:60px;width:500px;">
图形由顶点/节点和连接这些顶点的边/线组成。<br>图可以是无向的（意味着在与每个双向边相关联的两个顶点之间没有区别）或者可以指向图（意味着其边缘从一个顶点指向另一个顶点但不一定在另一个方向上）。<br>可以对图形进行加权（通过向每个边缘分配权重，其表示与该连接相关联的数值）或者图形可以是未加权的（所有边缘具有单位权重1或者所有边缘具有相同的恒定权重）。<br>
<hr>
<p><b>Remarks</b>: By default, we show e-Lecture Mode for first time (or non logged-in) visitor.<br>
Please <a href="login"><u>login</u></a> if you are a repeated visitor or <a href="login"><u>register</u></a> for an (optional) free account first.</p>
<div id='electure-dropdown'>
<select class="lecture-dropdown" style="width:100%">
<option value="1">1. 图</option>
<option value="1-1">&nbsp;&nbsp;&nbsp;1-1. 简单图形</option>
<option value="1-2">&nbsp;&nbsp;&nbsp;1-2. 术语，第1部分<br></option>
<option value="1-3">&nbsp;&nbsp;&nbsp;1-3. 术语，第2部分<br></option>
<option value="1-4">&nbsp;&nbsp;&nbsp;1-4. 术语，第3部分<br></option>
<option value="1-5">&nbsp;&nbsp;&nbsp;1-5. 术语，第4部分</option>
<option value="1-6">&nbsp;&nbsp;&nbsp;1-6. 术语，第5部分</option>
<option value="1-7">&nbsp;&nbsp;&nbsp;1-7. 特殊图形</option>
<option value="2">2. 图是普遍的</option>
<option value="2-1">&nbsp;&nbsp;&nbsp;2-1. 示例 - 更容易看到，1</option>
<option value="2-2">&nbsp;&nbsp;&nbsp;2-2. 示例 - 更容易看到，2<br></option>
<option value="2-3">&nbsp;&nbsp;&nbsp;2-3. 示例 - 更难看到</option>
<option value="3">3. 模式</option>
<option value="4">4. 可视化</option>
<option value="4-1">&nbsp;&nbsp;&nbsp;4-1. 可视化约束</option>
<option value="5">5. 图形的示例</option>
<option value="6">6. 特殊图形</option>
<option value="6-1">&nbsp;&nbsp;&nbsp;6-1. 特殊图形 - 树，第1部分<br></option>
<option value="6-2">&nbsp;&nbsp;&nbsp;6-2. 特殊图形 - 树，第2部分<br></option>
<option value="6-3">&nbsp;&nbsp;&nbsp;6-3. 特殊图形 - 树，第3部分<br></option>
<option value="6-4">&nbsp;&nbsp;&nbsp;6-4. 特殊图形 - 树，第4部分</option>
<option value="6-5">&nbsp;&nbsp;&nbsp;6-5. 特殊图表 - 完整</option>
<option value="6-6">&nbsp;&nbsp;&nbsp;6-6. 特殊图表 - 二分法</option>
<option value="6-7">&nbsp;&nbsp;&nbsp;6-7. 特殊图表 - DAG</option>
<option value="7">7. 三个图形数据结构</option>
<option value="7-1">&nbsp;&nbsp;&nbsp;7-1. 邻接矩阵（AM）</option>
<option value="7-2">&nbsp;&nbsp;&nbsp;7-2. AM-继续</option>
<option value="7-3">&nbsp;&nbsp;&nbsp;7-3. 答案</option>
<option value="7-4">&nbsp;&nbsp;&nbsp;7-4. 邻接列表（AL）</option>
<option value="7-5">&nbsp;&nbsp;&nbsp;7-5. Class IntegerPair (in Java)</option>
<option value="7-6">&nbsp;&nbsp;&nbsp;7-6. Why Vector of Vector Pairs?</option>
<option value="7-7">&nbsp;&nbsp;&nbsp;7-7. AL-继续</option>
<option value="7-8">&nbsp;&nbsp;&nbsp;7-8. 答案</option>
<option value="7-9">&nbsp;&nbsp;&nbsp;7-9. 边缘列表（EL）</option>
<option value="7-10">&nbsp;&nbsp;&nbsp;7-10. EL-继续</option>
<option value="7-11">&nbsp;&nbsp;&nbsp;7-11. 答案</option>
<option value="8">8. 简单应用<br></option>
<option value="8-1">&nbsp;&nbsp;&nbsp;8-1. 将V计数</option>
<option value="8-2">&nbsp;&nbsp;&nbsp;8-2. 答案</option>
<option value="8-3">&nbsp;&nbsp;&nbsp;8-3. 将 E 计数</option>
<option value="8-4">&nbsp;&nbsp;&nbsp;8-4. 答案</option>
<option value="8-5">&nbsp;&nbsp;&nbsp;8-5. 枚举顶点的邻居u<br></option>
<option value="8-6">&nbsp;&nbsp;&nbsp;8-6. 答案</option>
<option value="8-7">&nbsp;&nbsp;&nbsp;8-7. 检查边缘（u，v）的存在</option>
<option value="8-8">&nbsp;&nbsp;&nbsp;8-8. 答案</option>
<option value="8-9">&nbsp;&nbsp;&nbsp;8-9. 讨论</option>
<option value="8-10">&nbsp;&nbsp;&nbsp;8-10. 答案</option>
<option value="9">9. 附加功能</option>
<option value="9-1">&nbsp;&nbsp;&nbsp;9-1. 在线测验</option>
<option value="9-2">&nbsp;&nbsp;&nbsp;9-2. 在线测评练习</option>
<option value="9-3">&nbsp;&nbsp;&nbsp;9-3. Implementation Examples</option>
<option value="9-4">&nbsp;&nbsp;&nbsp;9-4. 讨论</option>
</select>
</div>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-next' data-nextid="1-1">下一个 <u>PgDn</u></div>
</div>
<div id="electure-1-1" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>Most graph problems that we discuss in VisuAlgo involves <i>simple</i> graphs.</p><br><p>In a simple graph, there is no <i>(self-)loop</i> edge (an edge that connects a vertex with itself) and no <i>multiple</i>/<i>parallel</i> edges (edges between the same pair of vertices). In another word: There can only be up to one edge between a pair of distinct vertices.</p><br><p>The number of edges <b>E</b> in a simple graph can only range from 0 to O(<b>V<sup>2</sup></b>).</p><br><p>Graph algorithms on simple graphs are easier than on non-simple graphs.</p>
<hr>
<p>Pro-tip: Since you are not <a href="login"><u>logged-in</u></a>, you may be a first time visitor who are not aware of the following keyboard shortcuts to navigate this e-Lecture mode: <b>[PageDown]</b> to advance to the next slide, <b>[PageUp]</b> to go back to the previous slide, <b>[Esc]</b> to toggle between this e-Lecture mode and exploration mode.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="1">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="1-2">下一个 <u>PgDn</u></div>
</div>
<div id="electure-1-2" class="electure-dialog" style="bottom:60px;left:50%;margin-left:-250px;width:500px;">
无向边e：（u，v）被认为是以其两个端点顶点入射：u和v。如果两个顶点与公共边缘一起入射，则它们被称为相邻（或邻居）。例如，边（0,2）入射到顶点0 + 2并且顶点0 + 2是相邻的。<br>如果两个边缘与公共顶点一起入射，则它们被称为相邻边缘。例如，边（0,2）和（2,4）是相邻的。<br>无向图中的顶点v的度数是与v一起入射的边的数量。度为0的顶点被称为孤立顶点。例如，顶点0/2/6分别具有2/3/1的度数。<br>图G的子图G&#39;是包含G的顶点和边的子集的（较小的）图。例如，三角形{0,1,2}是当前显示的图的子图。<br>
<hr>
<p>Another pro-tip: We designed this visualization and this e-Lecture mode to look good on 1366x768 resolution <b>or larger</b> (typical modern laptop resolution in 2017). We recommend using Google Chrome to access VisuAlgo. Go to full screen mode (<b>F11</b>) to enjoy this setup. However, you can use zoom-in (<b>Ctrl +</b>) or zoom-out (<b>Ctrl -</b>) to calibrate this.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="1-1">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="1-3">下一个 <u>PgDn</u></div>
</div>
<div id="electure-1-3" class="electure-dialog" style="bottom:60px;left:50%;margin-left:-250px;width:500px;">
<p>A path (of length <b>n</b>) in an (undirected) graph <b>G</b> is a sequence of vertices <b>{v<sub>0</sub>, v<sub>1</sub>, ..., v<sub>n-1</sub>, v<sub>n</sub>}</b> such that there is an edge between <b>v<sub>i</sub></b> and <b>v<sub>i+1</sub></b> &forall;<b>i</b> &in; [0..<b>n</b>-1] along the path.</p><br><p>If there is no repeated vertex along the path, we call such path as a simple path.</p><br><p>For example, {0, 1, 2, 4, 5} is one simple path in the currently displayed graph.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="1-2">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="1-4">下一个 <u>PgDn</u></div>
</div>
<div id="electure-1-4" class="electure-dialog" style="bottom:60px;left:50%;margin-left:-250px;width:500px;">
<p>An undirected graph <b>G</b> is called connected if there is a path between every pair of distinct vertices of <b>G</b>. For example, the currently displayed graph is not a connected graph.</p><br><p>An undirected graph <b>C</b> is called a connected component of the undirected graph <b>G</b> if 1). <b>C</b> is a subgraph of <b>G</b>; 2). <b>C</b> is connected; 3). no connected subgraph of <b>G</b> has <b>C</b> as a subgraph and contains vertices or edges that are not in <b>C</b> (i.e. <b>C</b> is the maximal subgraph that satisfies the other two criteria).</p><br><p>For example, the currently displayed graph have {0, 1, 2, 3, 4} and {5, 6} as its two connected components.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="1-3">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="1-5">下一个 <u>PgDn</u></div>
</div>
<div id="electure-1-5" class="electure-dialog" style="bottom:60px;left:50%;margin-left:-250px;width:500px;">
在有向图中，前面提到的一些术语有小的调整。<br><br>如果我们有一个有向边e：（u→v），我们说v与u相邻但不一定在另一个方向上。例如，1在当前显示的有向图中与0相邻但0与1不相邻。<br><br>在有向图中，我们必须进一步将顶点v的度数区分为度数和度数。度数/出度是分别从v进入/离开的边数。例如，顶点1的入度/出度分别为2/1。<br><br>在有向图中，我们定义了强连通分量（SCC）的概念。在当前显示的有向图中，我们将{0}，{1,2,3}和{4,5,6,7}作为其三个SCC。<br>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="1-4">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="1-6">下一个 <u>PgDn</u></div>
</div>
<div id="electure-1-6" class="electure-dialog" style="bottom:60px;left:50%;margin-left:-250px;width:500px;">
循环是以相同顶点开始和结束的路径。<br>非循环图是不包含循环的图。<br>在无向图中，每个无向边都会导致一个微不足道的循环，尽管我们通常不会将其归类为循环。<br>非循环的有向图具有特殊名称：有向无环图（DAG），如上所示。<br>我们可以在非循环图上执行有趣的算法，这些算法将在此可视化页面和VisuAlgo中的其他图形可视化页面中进行探索。<br>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="1-5">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="1-7">下一个 <u>PgDn</u></div>
</div>
<div id="electure-1-7" class="electure-dialog" style="bottom:60px;left:50%;margin-left:-250px;width:500px;">
具有涉及其顶点和/或边结构的特定属性的图可以使用其特定名称来调用，如树（如当前所示），完整图，二分图，有向无环图（DAG），以及使用频率较低的图：平面图，线图，星图，轮图等<br><br>在此可视化中，我们将在稍后突出显示前四个特殊图表。<br>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="1-6">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="2">下一个 <u>PgDn</u></div>
</div>
<div id="electure-2" class="electure-dialog" style="top:60px;left:60px;width:500px;">
图表在现实生活中经常以各种形式出现。因此，解决图形问题的最重要部分是图形建模部分，即将手中的问题简化为图形术语：顶点，边，权重等。<br>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="1-7">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="2-1">下一个 <u>PgDn</u></div>
</div>
<div id="electure-2-1" class="electure-dialog" style="bottom:60px;left:50%;margin-left:-250px;width:500px;">
社交网络：顶点可以代表人，边缘代表人与人之间的联系（通常是无向和未加权）。<br>例如，请参阅当前显示的无向图。此图显示了它们之间的7个顶点（人）和8个边（连接/关系）。也许我们可以提出这样的问题：<br><ol><li>谁是0号的朋友？<br></li><li>谁拥有最多的朋友？<br></li><li>有没有孤立的人（那些没有朋友的人）？<br></li><li>两个陌生人之间是否有共同的朋友：3号人和5号人？<br></li><li>等等...<br></li></ol>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="2">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="2-2">下一个 <u>PgDn</u></div>
</div>
<div id="electure-2-2" class="electure-dialog" style="bottom:60px;left:50%;margin-left:-250px;width:500px;">
运输网络：顶点可以表示站点，边缘表示站点之间的连接（通常是加权的）。<br>例如，请参阅当前显示的有向加权图。该图显示了5个顶点（站点/位置）和6个边缘（站点之间的连接/道路，具有正的权重行进时间，如图所示）。假设我们正在开车。我们或许可以问一下从0号站到4号站的路径是什么，以便我们用最少的时间到达4号站？<br>讨论：想想其他一些可以建模为图形的现实生活场景。<br>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="2-1">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="2-3">下一个 <u>PgDn</u></div>
</div>
<div id="electure-2-3" class="electure-dialog" style="bottom:60px;left:50%;margin-left:-250px;width:500px;">
<div style="background-color: white; color: black;">
<p>e-Lecture: The content of this slide is hidden and only available for legitimate CS lecturer worldwide. Drop an email to visualgo.info at gmail dot com if you want to activate this CS lecturer-only feature <b>and you are really a CS lecturer (show your University staff profile)</b>.</p>
</div>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="2-2">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="3">下一个 <u>PgDn</u></div>
</div>
<div id="electure-3" class="electure-dialog" style="top:60px;left:300px;width:500px;">
<p>要在图形绘制模式之间切换，请选择相应的标题。 我们有：</p><ol><li>U/U = 无向/不加权,</li><li>U/W = 无向/加权,</li><li>D/U = 有向/不加权, and</li><li>D/W = 有向/加权.</li></ol><p>我们根据所选模式限制您可以绘制的图形类型。</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="2-3">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="4">下一个 <u>PgDn</u></div>
</div>
<div id="electure-4" class="electure-dialog" style="top:400px;left:50%;margin-left:-250px;width:500px;">
<p>您可以单击任何一个示例图形并可视化上图。<br></p><p>您还可以直接在可视化区域中绘制图形：</p><ol><li>点击空白区域添加顶点，<br></li><li>单击顶点，按住，将绘制的边缘拖动到另一个顶点，然后将其放在那里以添加边缘（PS：此操作不适用于移动用户;您需要鼠标），</li><li>选择顶点/边缘并按“删除”键删除该顶点/边，</li><li>选择边缘并按“Enter”以更改该边缘的权重[0..99]，</li><li>按住“Ctrl”，然后您可以单击并拖动顶点。</li></ol>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="3">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="4-1">下一个 <u>PgDn</u></div>
</div>
<div id="electure-4-1" class="electure-dialog" style="top:400px;left:50%;margin-left:-300px;width:600px;">
我们将VisuAlgo中讨论的图形限制为简单图形。请参阅本幻灯片中的讨论。<br><br>我们还将可以在屏幕上绘制的顶点数限制为最多10个顶点，范围从顶点0到顶点9.这与上面的简单图形约束一起，将无向/有向边的数量限制为45 /分别为90。<br>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="4">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="5">下一个 <u>PgDn</u></div>
</div>
<div id="electure-5" class="electure-dialog" style="bottom:60px;left:230px;width:500px;">
所有示例图都可以在这里找到。<br><br>目前，我们为每个类别提供至少两个示例图表（U / U，U / W，D / U，D / W）。<br><br>请注意，在加载其中一个示例图表后，您可以进一步修改当前显示的图表以满足您的需要。<br>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="4-1">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="6">下一个 <u>PgDn</u></div>
</div>
<div id="electure-6" class="electure-dialog" style="bottom:70px;left:50%;margin-left:-250px;width:500px;">
Tree，Complete，Bipartite，Directed Acyclic Graph（DAG）是特殊图的属性。在上面的可视化/绘图区域中修改图形时，会立即检查和更新这些属性。<br><br>还有其他不太常用的特殊图形：平面图，线图，星图，轮图等，但在绘制它们时，它们当前在此可视化中不会被自动检测到。
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="5">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="6-1">下一个 <u>PgDn</u></div>
</div>
<div id="electure-6-1" class="electure-dialog" style="bottom:70px;left:50%;margin-left:-250px;width:500px;">
树是具有V顶点和E = V-1边的连通图，非循环，并且在任何顶点对之间具有一条唯一路径。通常，树在无向图上定义。<br><br>无向树（见上文）实际上包含琐碎的循环（由其双向边缘引起），但它不包含非平凡循环。有针对性的树显然是非循环的。<br><br>由于树只有V-1边，因此它通常被认为是稀疏图。<br><br>我们目前显示我们的U / U：Tree示例。您可以进入“探索模式”并绘制自己的树木。<br>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="6">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="6-2">下一个 <u>PgDn</u></div>
</div>
<div id="electure-6-2" class="electure-dialog" style="bottom:60px;left:50%;margin-left:-250px;width:500px;">
并非所有树都具有相同的图形绘制布局，其顶部具有特殊根顶点，底部具有叶顶点（顶点为1）。上面显示的（星）图也是树，因为它满足树的属性。<br><br>将其顶点之一指定为根顶点的树称为有根树。<br><br>我们总是可以通过将特定顶点（通常是顶点0）指定为根来将任何树转换为根树，并从根运行DFS或BFS算法。<br>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="6-1">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="6-3">下一个 <u>PgDn</u></div>
</div>
<div id="electure-6-3" class="electure-dialog" style="bottom:60px;left:50%;margin-left:-250px;width:500px;">
在根树中，我们有层次结构（父，子，祖先，后代），子树，级别和高度的概念。我们将通过示例说明这些概念，因为它们的含义与现实生活中的对应物一样：<br><br>0/1/7/2/4的父级分别为none / 0/0/1/3，<br>0/1/7的子女分别为{1,7} / {2,3,6} / {8,9}，<br>4/8的祖先分别为{3,1,0} / {7,0}，<br>1/7的后代分别是{2,3,4,5,6} / {8,9}，<br>以1为根的子树包括1，其后代和所有相关边，<br>0/1/2/3级成员分别为{0} / {1,7} / {2,3,6,8,9} / {4,5}，<br>这个有根树的高度是它的最高级别= 3。<br>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="6-2">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="6-4">下一个 <u>PgDn</u></div>
</div>
<div id="electure-6-4" class="electure-dialog" style="bottom:60px;left:50%;margin-left:-250px;width:500px;">
<p>For rooted tree, we can also define additional properties:</p><br><p>A binary tree is a rooted tree in which a vertex has at most two children that are aptly named: left and right child. We will frequently see this form during discussion of <a href="./bst"><u>Binary Search Tree</u></a> and <a href="./heap"><u>Binary Heap</u></a>.</p><br><p>A full binary tree is a binary tree in which each non-leaf (also called the internal) vertex has exactly two children. The binary tree shown above fulfils this criteria.</p><br><p>A complete binary tree is a binary tree in which every level is completely filled, except possibly the last level may be filled as far left as possible. We will frequently see this form especially during discussion of <a href="./heap"><u>Binary Heap</u></a>.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="6-3">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="6-5">下一个 <u>PgDn</u></div>
</div>
<div id="electure-6-5" class="electure-dialog" style="bottom:70px;left:50%;margin-left:-250px;width:500px;">
完整图是具有V个顶点和<span style="white-space: normal;">&nbsp;</span><b style="white-space: normal;">E = V*(V-1)/2</b><span style="white-space: normal;">&nbsp;</span>个边（或<b style="white-space: normal;">E</b><span style="white-space: normal;">&nbsp;= O(</span><b style="white-space: normal;">V<sup>2</sup></b><span style="white-space: normal;">)&nbsp;</span><span style="white-space: normal;">)</span>的图，即在任何顶点对之间存在边。通常，完整图表用<b>K<sub>V</sub></b>表示。<br>完整图是<b>最密集</b>的简单图。<br>我们目前展示了我们的<b style="white-space: normal;">U/W: K<sub>5</sub></b>示例。您可以进入“探索模式”并绘制自己的完整图形（虽然对于较大的V来说有点单调乏味）。<br>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="6-4">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="6-6">下一个 <u>PgDn</u></div>
</div>
<div id="electure-6-6" class="electure-dialog" style="bottom:70px;left:50%;margin-left:-250px;width:500px;">
二分图是具有V个顶点的无向图，其可以被划分为大小为m和n的两个不相交的顶点集，其中V = m + n。同一组的成员之间没有边缘。二分图也没有奇数周期。<br><br>我们目前展示了我们的U / U：Bipartite示例。您可以进入“探索模式”并绘制自己的二分图。<br><br>二分图也可以是完整的，即来自一个不相交集的所有m个顶点都连接到来自另一个不相交集的所有n个顶点。当m = n = V / 2时，这样的完全二分图也具有E = O（V2）。<br>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="6-5">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="6-7">下一个 <u>PgDn</u></div>
</div>
<div id="electure-6-7" class="electure-dialog" style="bottom:70px;left:50%;margin-left:-250px;width:500px;">
<p><b>Directed Acyclic Graph (DAG)</b> is a directed graph that has no cycle, which is very relevant for <a href="./recursion"><u>Dynamic Programming (DP)</u></a> techniques.</p><br><p>Each DAG has at least one <a href="./dfsbfs"><u>Topological Sort/Order</u></a> which can be found with a simple tweak to DFS/BFS Graph Traversal algorithm. DAG will be revisited again in <a href="./sssp"><u>DP technique for SSSP on DAG</u></a>.</p><br><p>We currently show our <b>D/W: Four 0&rarr;4 Paths</b> example. You can go to &#39;Exploration Mode&#39; and draw your own DAGs.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="6-6">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="7">下一个 <u>PgDn</u></div>
</div>
<div id="electure-7" class="electure-dialog" style="bottom:70px;left:50%;margin-left:-250px;width:500px;">
有许多方法可以将图形信息存储到图形数据结构中。在此可视化中，我们显示了三个图形数据结构：邻接矩阵，邻接列表和边缘列表 - 每个都有自己的优点和缺点。<br>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="6-7">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="7-1">下一个 <u>PgDn</u></div>
</div>
<div id="electure-7-1" class="electure-dialog" style="bottom:70px;left:25%;margin-left:-250px;width:500px;">
<p>Adjacency Matrix (AM) is a square matrix where the entry AM[i][j] shows the edge&#39;s weight from vertex i to vertex j. For unweighted graphs, we can set a unit weight = 1 for all edge weights. An &#39;x&#39; means that that vertex does not exist (deleted).</p><br><p>We simply use a C++/Java native 2D array of size <b>VxV</b> to implement this data structure.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="7">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="7-2">下一个 <u>PgDn</u></div>
</div>
<div id="electure-7-2" class="electure-dialog" style="bottom:70px;left:25%;margin-left:-250px;width:500px;">
<p>Space Complexity Analysis: An AM unfortunately requires a big space complexity of O(<b>V</b><sup>2</sup>), even when the graph is actually sparse (not many edges).</p><br><p>Discussion: Knowing the large space complexity of AM, when is it beneficial to use it? Or is AM always an inferior graph data structure and should not be used at all times?</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="7-1">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="7-3">下一个 <u>PgDn</u></div>
</div>
<div id="electure-7-3" class="electure-dialog" style="bottom:70px;left:25%;margin-left:-250px;width:500px;">
<div style="background-color: white; color: black;">
<p>e-Lecture: The content of this slide is hidden and only available for legitimate CS lecturer worldwide. Drop an email to visualgo.info at gmail dot com if you want to activate this CS lecturer-only feature <b>and you are really a CS lecturer (show your University staff profile)</b>.</p>
</div>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="7-2">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="7-4">下一个 <u>PgDn</u></div>
</div>
<div id="electure-7-4" class="electure-dialog" style="bottom:70px;left:50%;margin-left:-250px;width:500px;">
<p>Adjacency List (AL) is an array of <b>V</b> lists, one for each vertex (usually in increasing vertex number) where for each vertex i, <b>AL[i]</b> stores the list of i&#39;s neighbors. For weighted graphs, we can store pairs of (neighbor vertex number, weight of this edge) instead.</p><br><p>We use a Vector of Vector pairs (for weighted graphs) to implement this data structure.<br>In C++: <samp>vector&lt;vector&lt;pair&lt;int,int&gt;&gt;&gt; AL;</samp><br>In Java: <samp>Vector &lt; Vector &lt; IntegerPair &gt; &gt; AL;<br>// class IntegerPair in Java is like pair&lt;int,int&gt; in C++, next slide</samp></p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="7-3">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="7-5">下一个 <u>PgDn</u></div>
</div>
<div id="electure-7-5" class="electure-dialog" style="bottom:70px;left:50%;margin-left:-250px;width:500px;">
<pre>class IntegerPair implements Comparable&lt;IntegerPair&gt; {<br>  Integer _f, _s;<br>  public IntegerPair(Integer f, Integer s) { _f = f; _s = s; }<br>  public int compareTo(IntegerPair o) {<br>    if (!this.first().equals(o.first())) // this.first() != o.first()<br>      return this.first() - o.first();   // is wrong as we want to<br>    else                                 // compare their values,<br>      return this.second() - o.second(); // not their references<br>  }<br>  Integer first() { return _f; }<br>  Integer second() { return _s; }<br>}<br>// IntegerTriple is similar to IntegerPair, just that it has 3 fields </pre>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="7-4">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="7-6">下一个 <u>PgDn</u></div>
</div>
<div id="electure-7-6" class="electure-dialog" style="bottom:70px;left:50%;margin-left:-250px;width:500px;">
<p>We use pairs as we need to store pairs of information for each edge: (neighbor vertex number, edge weight) where weight can be set to 0 or unused for unweighted graph.</p><br><p>We use Vector of Pairs due to Vector&#39;s auto-resize feature. If we have <b>k</b> neighbors of a vertex, we just add <b>k</b> times to an initially empty Vector of Pairs of this vertex (this Vector can be replaced with Linked List).</p><br><p>We use Vector of Vectors of Pairs for Vector&#39;s indexing feature, i.e. if we want to enumerate neighbors of vertex <b>u</b>, we use AL[u] (C++) or AL.get(u) (Java) to access the correct Vector of Pairs.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="7-5">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="7-7">下一个 <u>PgDn</u></div>
</div>
<div id="electure-7-7" class="electure-dialog" style="bottom:70px;left:50%;margin-left:-250px;width:500px;">
<p>Space Complexity Analysis: AL has space complexity of O(<b>V</b>+<b>E</b>), which is much more efficient than AM and usually the default graph DS inside most graph algorithms.</p><br><p>Discussion: AL is the most frequently used graph data structure, but discuss several scenarios when AL is actually <b>not</b> the best graph data structure?</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="7-6">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="7-8">下一个 <u>PgDn</u></div>
</div>
<div id="electure-7-8" class="electure-dialog" style="bottom:70px;left:50%;margin-left:-250px;width:500px;">
<div style="background-color: white; color: black;">
<p>e-Lecture: The content of this slide is hidden and only available for legitimate CS lecturer worldwide. Drop an email to visualgo.info at gmail dot com if you want to activate this CS lecturer-only feature <b>and you are really a CS lecturer (show your University staff profile)</b>.</p>
</div>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="7-7">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="7-9">下一个 <u>PgDn</u></div>
</div>
<div id="electure-7-9" class="electure-dialog" style="bottom:70px;left:75%;margin-left:-250px;width:500px;">
边缘列表（EL）是具有连接顶点及其权重的边的集合。通常，这些边缘通过增加重量来分类，例如， Kruskal最小生成树（MST）问题算法的一部分。但是，在此可视化中，我们通过增加第一个顶点数来对边进行排序，如果是连接，则通过增加第二个顶点数来对边进行排序请注意，无向/有向图中的双向边分别列出一次/两次。<br><br>我们使用三元组Vector来实现这种数据结构。在C ++中：vector &lt;tuple &lt;int，int，int &gt;&gt; EL;在Java中：Vector &lt;integertriple&gt; EL; // Java中的IntegerTriple类似于C ++中的tuple &lt;int，int，int&gt;
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="7-8">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="7-10">下一个 <u>PgDn</u></div>
</div>
<div id="electure-7-10" class="electure-dialog" style="bottom:70px;left:75%;margin-left:-250px;width:500px;">
空间复杂度分析：EL具有O（E）的空间复杂度，其比AM更有效并且与AL一样有效。<br><br>讨论：除了Kruskal的最小生成树（MST）算法之外，详细说明EL的潜在用法！<br>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="7-9">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="7-11">下一个 <u>PgDn</u></div>
</div>
<div id="electure-7-11" class="electure-dialog" style="bottom:70px;left:75%;margin-left:-250px;width:500px;">
<div style="background-color: white; color: black;">
<p>e-Lecture: The content of this slide is hidden and only available for legitimate CS lecturer worldwide. Drop an email to visualgo.info at gmail dot com if you want to activate this CS lecturer-only feature <b>and you are really a CS lecturer (show your University staff profile)</b>.</p>
</div>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="7-10">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="8">下一个 <u>PgDn</u></div>
</div>
<div id="electure-8" class="electure-dialog" style="bottom:70px;left:50%;margin-left:-250px;width:500px;">
<p>After storing our graph information into a graph DS, we can answer <b>a few</b> simple queries.</p><ol><li>Counting <b>V</b>,</li><li>Counting <b>E</b>,</li><li>Enumerating neighbors of a vertex <b>u</b>,</li><li>Checking the existence of edge <b>(u, v)</b>, etc.</li></ol>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="7-11">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="8-1">下一个 <u>PgDn</u></div>
</div>
<div id="electure-8-1" class="electure-dialog" style="bottom:70px;left:50%;margin-left:-250px;width:500px;">
<p>In an AM and AL, <b>V</b> is just the number of rows in the data structure that can be obtained in O(<b>V</b>) or even in O(<b>1</b>) &mdash; depending on the actual implementation.</p><br><p>Discussion: How to count <b>V</b> if the graph is stored in an EL?</p><br><p>PS: Sometimes this number is stored/maintained in a separate variable so that we do not have to re-compute this every time — especially if the graph never/rarely changes after it is created, hence O(<b>1</b>) performance, e.g. we can store that there are 7 vertices (in our AM/AL/EL data structure) for the example graph shown above.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="8">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="8-2">下一个 <u>PgDn</u></div>
</div>
<div id="electure-8-2" class="electure-dialog" style="bottom:70px;left:50%;margin-left:-250px;width:500px;">
<div style="background-color: white; color: black;">
<p>e-Lecture: The content of this slide is hidden and only available for legitimate CS lecturer worldwide. Drop an email to visualgo.info at gmail dot com if you want to activate this CS lecturer-only feature <b>and you are really a CS lecturer (show your University staff profile)</b>.</p>
</div>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="8-1">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="8-3">下一个 <u>PgDn</u></div>
</div>
<div id="electure-8-3" class="electure-dialog" style="bottom:70px;left:50%;margin-left:-250px;width:500px;">
<p>In an EL, <b>E</b> is just the number of its rows that can be counted in O(<b>E</b>). Note that depending on the need, we may store a bidirectional edge just once in the EL but on other case, we store both directed edges inside the EL.</p><br><p>In an AL, <b>E</b> can be found by summing the length of all <b>V</b> lists and divide the final answer by 2 (for undirected graph). This requires O(<b>V</b>+<b>E</b>) computation time as each vertex and each edge is only processed once.</p><br><p>Discussion: How to count <b>E</b> if the graph is stored in an AM?</p><br><p>PS: Sometimes this number is stored/maintained in a separate variable for efficiency, e.g. we can store that there are 8 undirected edges (in our AM/AL/EL data structure) for the example graph shown above.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="8-2">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="8-4">下一个 <u>PgDn</u></div>
</div>
<div id="electure-8-4" class="electure-dialog" style="bottom:70px;left:50%;margin-left:-250px;width:500px;">
<div style="background-color: white; color: black;">
<p>e-Lecture: The content of this slide is hidden and only available for legitimate CS lecturer worldwide. Drop an email to visualgo.info at gmail dot com if you want to activate this CS lecturer-only feature <b>and you are really a CS lecturer (show your University staff profile)</b>.</p>
</div>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="8-3">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="8-5">下一个 <u>PgDn</u></div>
</div>
<div id="electure-8-5" class="electure-dialog" style="bottom:70px;left:50%;margin-left:-250px;width:500px;">
<p>In an AM, we need to loop through all columns of AM[u][j] &forall;j &in; [0..<b>V</b>-1] and report pair of (j, AM[u][j]) if AM[u][j] is not zero. This is O(<b>V</b>) &mdash; slow.</p><br><p>In an AL, we just need to scan AL[u]. If there are only <b>k</b> neighbors of vertex <b>u</b>, then we just need O(<b>k</b>) to enumerate them &mdash; this is called an <b>output-sensitive</b> time complexity and is already the best possible.</p><br><p>We usually list the neighbors in increasing vertex number. For example, neighbors of vertex 1 in the example graph above are {0, 2, 3}, in that increasing vertex number order.</p><br><p>Discussion: How to do this if the graph is stored in an EL?</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="8-4">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="8-6">下一个 <u>PgDn</u></div>
</div>
<div id="electure-8-6" class="electure-dialog" style="bottom:70px;left:50%;margin-left:-250px;width:500px;">
<div style="background-color: white; color: black;">
<p>e-Lecture: The content of this slide is hidden and only available for legitimate CS lecturer worldwide. Drop an email to visualgo.info at gmail dot com if you want to activate this CS lecturer-only feature <b>and you are really a CS lecturer (show your University staff profile)</b>.</p>
</div>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="8-5">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="8-7">下一个 <u>PgDn</u></div>
</div>
<div id="electure-8-7" class="electure-dialog" style="bottom:70px;left:50%;margin-left:-250px;width:500px;">
<p>In an AM, we can simply check if AM[u][v] is non zero. This is O(<b>1</b>) &mdash; the fastest possible.</p><br><p>In an AL, we have to check whether AL[u] contains vertex <b>v</b> or not. This is O(<b>k</b>) &mdash; slower.</p><br><p>For example, edge (2, 4) exists in the example graph above but edge (2, 6) does not exist.</p><br><p>Note that if we have found edge (u, v), we can also access and/or update its weight.</p><br><p>Discussion: How to do this if the graph is stored in an EL?</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="8-6">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="8-8">下一个 <u>PgDn</u></div>
</div>
<div id="electure-8-8" class="electure-dialog" style="bottom:70px;left:50%;margin-left:-250px;width:500px;">
<div style="background-color: white; color: black;">
<p>e-Lecture: The content of this slide is hidden and only available for legitimate CS lecturer worldwide. Drop an email to visualgo.info at gmail dot com if you want to activate this CS lecturer-only feature <b>and you are really a CS lecturer (show your University staff profile)</b>.</p>
</div>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="8-7">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="8-9">下一个 <u>PgDn</u></div>
</div>
<div id="electure-8-9" class="electure-dialog" style="bottom:70px;left:50%;margin-left:-200px;width:400px;">
<input class="mcq-answer" id="mcq-answer-11" value="52" hidden><p>Quiz: <b>So, what is the best graph data structure?</b></p><form><input type="radio" name="mcq-11-choice" value="51"> Edge List<br><input type="radio" name="mcq-11-choice" value="50"> Adjacency List<br><input type="radio" name="mcq-11-choice" value="49"> Adjacency Matrix<br><input type="radio" name="mcq-11-choice" value="52"> It Depends<br></form><button class="mcq-submit" id="submit-11">Submit</button> <span id="answer-status-11"></span><br><p>讨论: 为什么?</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="8-8">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="8-10">下一个 <u>PgDn</u></div>
</div>
<div id="electure-8-10" class="electure-dialog" style="bottom:70px;left:50%;margin-left:-250px;width:500px;">
<div style="background-color: white; color: black;">
<p>e-Lecture: The content of this slide is hidden and only available for legitimate CS lecturer worldwide. Drop an email to visualgo.info at gmail dot com if you want to activate this CS lecturer-only feature <b>and you are really a CS lecturer (show your University staff profile)</b>.</p>
</div>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="8-9">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="9">下一个 <u>PgDn</u></div>
</div>
<div id="electure-9" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>You have reached the end of the basic stuffs of this relatively simple Graph Data Structures and we encourage you to explore further in the <b>Exploration Mode</b> by drawing <b>your own</b> graphs.</p><br><p>However, we still have a few more interesting Graph Data Structures challenges for you that are outlined in this section.</p><br><p>Note that graph data structures are usually just the necessary but not sufficient part to solve the harder graph problems like <a href="./mst"><u>MST</u></a>, <a href="./sssp"><u>SSSP</u></a>, <a href="./maxflow"><u>Max Flow</u></a>, <a href="./matching"><u>Matching</u></a>, etc.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="8-10">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="9-1">下一个 <u>PgDn</u></div>
</div>
<div id="electure-9-1" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>有关此数据结构的一些有趣问题，请练习<a href="training?diff=Medium&amp;n=7&amp;tl=0&amp;module=graphds"><u>Graph Data Structures</u></a>培训模块（无需登录）。<br>但是，对于注册用户，您应该登录然后转到<a href="training"><u>主培训页面</u></a>以正式清除此模块，此类成就将记录在您的用户帐户中。<br></p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="9">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="9-2">下一个 <u>PgDn</u></div>
</div>
<div id="electure-9-2" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>尝试解决两个基本的编程问题，这些问题需要使用图形数据结构，而不需要任何花哨的图形算法：</p><ol><li><a href="https://uva.onlinejudge.org/external/108/10895.pdf" target="_blank"><u>UVa 10895 - Matrix Transpose</u></a> and,</li><li><a href="https://open.kattis.com/problems/flyingsafely" target="_blank"><u>Kattis - flyingsafely</u></a>.</li></ol>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="9-1">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="9-3">下一个 <u>PgDn</u></div>
</div>
<div id="electure-9-3" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>Please look at the following C++/Java/Python/OCaml implementations of the three graph data structures mentioned in this e-Lecture: Adjacency Matrix, Adjacency List, and Edge List:<br><a href="https://github.com/stevenhalim/cpbook-code/blob/master/ch2/ourown/graph_ds.cpp" target="_blank"><u>graph_ds.cpp</u></a><br><a href="https://github.com/stevenhalim/cpbook-code/blob/master/ch2/ourown/graph_ds.java" target="_blank"><u>graph_ds.java</u></a><br><a href="https://github.com/stevenhalim/cpbook-code/blob/master/ch2/ourown/graph_ds.py" target="_blank"><u>graph_ds.py</u></a><br><a href="https://github.com/stevenhalim/cpbook-code/blob/master/ch2/ourown/graph_ds.ml" target="_blank"><u>graph_ds.ml</u></a><br></p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="9-2">上一个 <u>PgUp</u></div>
<div class='electure-next' data-nextid="9-4">下一个 <u>PgDn</u></div>
</div>
<div id="electure-9-4" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<div style="background-color: white; color: black;">
<p>e-Lecture: The content of this slide is hidden and only available for legitimate CS lecturer worldwide. Drop an email to visualgo.info at gmail dot com if you want to activate this CS lecturer-only feature <b>and you are really a CS lecturer (show your University staff profile)</b>.</p>
</div>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="9-3">上一个 <u>PgUp</u></div>
</div>
<div id="popup" hidden>
<div id="popup-content"></div>
<span id="hide-popup" hidden>X <u>关闭</u></span>
</div>
<div id="viz">
<svg width="640" height="360"></svg>
</div>
<table style="width: 600px; margin: auto;">
<tr>
<td style="width: 120px; text-align: right;">&bull; <b><span id="VandE">V=0, E=0</span></b></td>
<td style="width: 120px; text-align: right;">&bull; 树? <b><span id="isTree">No</span></b></td>
<td style="width: 120px; text-align: right;">&bull; 完成? <b><span id="isComplete">No</span></b></td>
<td style="width: 120px; text-align: right;">&bull; 二部? <b><span id="isBipartite">No</span></b></td>
<td style="width: 120px; text-align: right;">&bull; DAG? <b><span id="isDAG">No</span></b></td>
<td style="width: 120px; text-align: right;">&bull; 交叉? <b><span id="isCross">No</span></b></td>
</tr>
</table>
<table style="width: 960px; margin: auto;">
<tr>
<td style="width: 400px;">
<div id="adj_matrix" style="float:left; border:0px solid; max-height: 220px; max-width: 390px; overflow: auto; margin-left: 25px;">
<div class="tableTitle">邻接矩阵</div>
<table class="graphTable" id="adj_matrix_table" style="width: 390px;">
<tbody>
<tr><td></td><td class="bold">0</td><td class="bold">1</td><td class="bold">2</td></tr>
<tr><td class="bold">0</td><td>0</td><td>1</td><td>0</td></tr>
<tr><td class="bold">1</td><td>1</td><td>0</td><td>1</td></tr>
<tr><td class="bold">2</td><td>0</td><td>1</td><td>0</td></tr>
</tbody>
</table>
</div>
</td>
<td style="width: 360px;">
<div id="adj_list" style="float: left; border: 1px solid; max-height: 220px; max-width: 350px;">
<div class="tableTitle" style="float:left">邻接列表</div>
<table class="graphTable" id="adj_list_table" style="width: 350px;">
<tbody>
 <tr><td class="bold">0: </td><td>1</td><td></td></tr>
<tr><td class="bold">1: </td><td>0</td><td>2</td></tr>
<tr><td class="bold">2: </td><td>1</td><td></td></tr>
</tbody>
</table>
</div>
</td>
<td style="width: 200px;">
<div id="edge_list" style="float: left; border: 1px solid; max-height: 220px; max-width: 190px; overflow-y: auto;">
<div class="tableTitle" style="float:left">边缘列表</div>
<table class="graphTable" id="edge_list_table" style="width: 150px;">
<tbody>
<tr><td class="bold">0: </td><td>0</td><td>1</td></tr>
<tr><td class="bold">1: </td><td>1</td><td>2</td></tr>
</tbody>
</table>
</div>
</td>
</tr>
</table>
<div id="actions" class="panel">
<p onClick="GraphVisu(true , true , 'CP3Fig2.4');">U/U: CP3 图像 2.4</p>
<p onClick="GraphVisu(true , true , 'CP3Fig2.4_disjoint');">U/U: CP3 图像 2.4, disjoint</p>
<p onClick="GraphVisu(true , true , 'tree');">U/U: Tree</p>
<p onClick="GraphVisu(true , true , 'binarytree');">U/U: Binary Tree</p>
<p onClick="GraphVisu(true , true , 'bipartite');">U/U: Bipartite</p>
<p onClick="GraphVisu(true , true , 'CP2.5C');">U/U: CP2.5C - Knight Jump</p>
<p onClick="GraphVisu(true , false, 'CP3Fig4.10');">U/W: CP3 图像 4.10</p>
<p onClick="GraphVisu(true , false, 'k5');">U/W: K<sub>5</sub> (Complete)</p>
<p onClick="GraphVisu(true , false, 'star');">U/W: Star</p>
<p onClick="GraphVisu(false, true , 'CP3Fig4.4');">D/U: CP3 图像 4.4</p>
<p onClick="GraphVisu(false, true , 'CP3Fig4.8');">D/U: CP3 图像 4.8</p>
<p onClick="GraphVisu(false, true , 'cyclic');">D/U: Cyclic</p>
<p onClick="GraphVisu(false, false, 'CP3Fig4.26B');">D/W: CP3 图像 4.26B*</p>
<p onClick="GraphVisu(false, false, 'sssp');">D/W: Four 0&rarr;4 Paths</p>
</div>
<div id="actions-hide" class="panel-hide"><img src="../img/arrow_white_right.png" alt=">" title="show/hide actions panel" /></div>
<div id="bottom-bar">
<a id="trigger-about">关于</a>
</div>
<div id="about" class="overlays">
<h4>关于</h4><span class='close-overlay'>&#x2715;</span>
<div class='content'>
VisuAlgo在2011年由Steven Halim博士概念化，作为一个工具，帮助他的学生更好地理解数据结构和算法，让他们自己和自己的步伐学习基础。<br>VisuAlgo包含许多高级算法，这些算法在Steven Halim博士的书（“竞争规划”，与他的兄弟Felix Halim博士合作）和其他书中讨论。今天，一些高级算法的可视化/动画只能在VisuAlgo中找到。<br>虽然专门为新加坡国立大学（NUS）学生采取各种数据结构和算法类（例如CS1010，CS1020，CS2010，CS2020，CS3230和CS3230），作为在线学习的倡导者，我们希望世界各地的好奇心发现这些可视化也很有用。<br>VisuAlgo不是从一开始就设计为在小触摸屏（例如智能手机）上工作良好，因为需要满足许多复杂的算法可视化，需要大量的像素和点击并拖动手势进行交互。一个令人尊敬的用户体验的最低屏幕分辨率为1024x768，并且只有着陆页相对适合移动设备。<br>VisuAlgo是一个正在进行的项目，更复杂的可视化仍在开发中。<br>最令人兴奋的发展是自动问题生成器和验证器（在线测验系统），允许学生测试他们的基本数据结构和算法的知识。这些问题是通过一些规则随机生成的，学生的答案会在提交给我们的评分服务器后立即自动分级。这个在线测验系统，当它被更多的世界各地的CS教师采用，应该技术上消除许多大学的典型计算机科学考试手动基本数据结构和算法问题。通过在通过在线测验时设置小（但非零）的重量，CS教练可以（显着地）增加他/她的学生掌握这些基本问题，因为学生具有几乎无限数量的可以立即被验证的训练问题他们参加在线测验。培训模式目前包含12个可视化模块的问题。我们将很快添加剩余的8个可视化模块，以便VisuAlgo中的每个可视化模块都有在线测验组件。<br>另一个积极的发展分支是VisuAlgo的国际化子项目。我们要为VisuAlgo系统中出现的所有英语文本准备一个CS术语的数据库。这是一个很大的任务，需要众包。一旦系统准备就绪，我们将邀请VisuAlgo游客贡献，特别是如果你不是英语母语者。目前，我们还以各种语言写了有关VisuAlgo的公共注释：<br>
<a href="https://weibo.com/p/230418436e9ee80102v4rk" target='_blank'><u>zh</u></a>, <a href='https://www.facebook.com/notes/steven-halim/httpidvisualgonet-visualisasi-struktur-data-dan-algoritma-dengan-animasi/10153236934439689' target='_blank'><u>id</u></a>, <a href="https://blog.naver.com/visualgo_nus" target='_blank'><u>kr</u></a>, <a href='https://www.facebook.com/groups/163215593699283/permalink/824003417620494/' target='_blank'><u>vn</u></a>, <a href='http://pantip.com/topic/32736343' target='_blank'><u>th</u></a>.</p>
</div>
</div>

<script src="../js/jquery-3.3.1.min.js"></script>
<script>
      var PHP_DOMAIN = "";

      // surprise colour!
      // Referenced to in  home.js and viz.js also
      var colourArray = ["#52bc69", "#d65775"/*"#ed5a7d"*/, "#2ebbd1", "#d9513c", "#fec515", "#4b65ba", "#ff8a27", "#a7d41e"]; // green, pink, blue, red, yellow, indigo, orange, lime

      function disableScroll() { $('html').css('overflow', 'hidden'); }

      function enableScroll() { $('html').css('overflow', 'visible'); }

      function replaceAll(find, replace, str) { return str.replace(new RegExp(find, 'g'), replace); }

      function getColours() {
        var generatedColours = new Array();
        while (generatedColours.length < 4) {
          var n = (Math.floor(Math.random() * colourArray.length));
          if ($.inArray(n, generatedColours) == -1)
            generatedColours.push(n);
        }
        return generatedColours;
      }

      function isOn(value, position) {
        return (value>>position) & 1 === 1;
      }

      function customAlert(msg) {
        $('#custom-alert p').html(msg);
        var m = -1 * ($('#custom-alert').outerHeight()/2);
        $('#custom-alert').css('margin-top', m+'px');
        $('#dark-overlay').fadeIn(function() {
          $('#custom-alert').fadeIn(function() {
            setTimeout(function() {
              $('#custom-alert').fadeOut(function() {
                $('#dark-overlay').fadeOut();
              });
            }, 1000);
          });
        });
      }

      function showLoadingScreen() {
        $('#loading-overlay').show();
        $('#loading-message').show();
      }

      function hideLoadingScreen() {
        $('#loading-overlay').hide();
      }

      function commonAction(retval, msg) {
        //setTimeout(function() {
          if (retval) { // mode == "exploration" && // now not only for exploration mode, but check if this opens other problems
            $('#current-action').show();
            $('#current-action').html(mode == "exploration" ? msg : ("e-Lecture Example (auto play until done)<br>" + msg));
            $('#progress-bar').slider("option", "max", gw.getTotalIteration()-1);
            triggerRightPanels();
            isPlaying = true;
          }
        //}, 500);
      }

      function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split('&');
        for (var i = 0; i < vars.length; i++) {
          var pair = vars[i].split('=');
          if (decodeURIComponent(pair[0]) == variable)
            return decodeURIComponent(pair[1]);
        }
        return "";
      }

      var generatedColours = getColours();
      var surpriseColour = colourArray[generatedColours[0]];
      var colourTheSecond = colourArray[generatedColours[1]];
      var colourTheThird = colourArray[generatedColours[2]];
      var colourTheFourth = colourArray[generatedColours[3]];

      $(function() {
        $('.links').css('background', surpriseColour);
        $('.right-links').css('background', surpriseColour);
        $('#login-go').css('background', surpriseColour);

        $('.colour').css("color", surpriseColour); // name
        $('h4').css("background-color", surpriseColour); // about, contact us etc. button background

        // title
        $('#title a').click(function() {
          $('#title a').removeClass('selected-viz');
          $(this).addClass('selected-viz');
          // temporary quick fix for Google Chrome Aug 2016 issue...
          setTimeout(function(){ document.body.style.zoom = "100.1%"; }, 100); // force resize/redraw...
          setTimeout(function(){ document.body.style.zoom = "100%"; }, 600);
        });

        // overlays stuffs
        $('#trigger-about').click(function() {
          if ($(window).width() > 600) {
            $('#dark-overlay').fadeIn(function() {
              $('#about').fadeIn();
            });
          }
          else
            alert('Sorry, this dialog is too big. Please load it on bigger screen');
        });

        $('.close-overlay').click(function() {
          $('.overlays').fadeOut(function() {
            $('#dark-overlay').fadeOut();
          });
        });

        $('#dark-overlay').click(function() {
          $('.overlays').fadeOut();
          $('#dark-overlay').fadeOut();
        });
      });
    </script>

<script src="../js/jquery-ui.min.js"></script>
<script src="../js/d3.min.js"></script>
<script src="../js/viz-1.0.3.js"></script>
<script src="../js/visualgo_print.js"></script>
<script src="../js/graph_library.js"></script>
<script>
      function runSlide(slide) {
        if (slide == '1') {
          $("#e-lecture").html("slide " + slide + " (" + 1 + "%)");
          GraphVisu(true , true , 'CP3Fig2.4');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '1-1') {
          $("#e-lecture").html("slide " + slide + " (" + 3 + "%)");
          GraphVisu(true , true , 'CP3Fig2.4');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '1-2') {
          $("#e-lecture").html("slide " + slide + " (" + 5 + "%)");
          GraphVisu(true , true , 'CP3Fig2.4');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '1-3') {
          $("#e-lecture").html("slide " + slide + " (" + 7 + "%)");
          GraphVisu(true , true , 'CP3Fig2.4');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '1-4') {
          $("#e-lecture").html("slide " + slide + " (" + 9 + "%)");
          GraphVisu(true , true , 'CP3Fig2.4_disjoint');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '1-5') {
          $("#e-lecture").html("slide " + slide + " (" + 11 + "%)");
          GraphVisu(false , true , 'CP3Fig4.8');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '1-6') {
          $("#e-lecture").html("slide " + slide + " (" + 13 + "%)");
          GraphVisu(false , true , 'CP3Fig4.4');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '1-7') {
          $("#e-lecture").html("slide " + slide + " (" + 15 + "%)");
          GraphVisu(true , true , 'tree');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '2') {
          $("#e-lecture").html("slide " + slide + " (" + 17 + "%)");
          GraphVisu(true , true , 'CP3Fig2.4');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '2-1') {
          $("#e-lecture").html("slide " + slide + " (" + 19 + "%)");
          GraphVisu(true , true , 'CP3Fig2.4');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '2-2') {
          $("#e-lecture").html("slide " + slide + " (" + 21 + "%)");
          GraphVisu(false, false, 'sssp');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '2-3') {
          $("#e-lecture").html("slide " + slide + " (" + 23 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '3') {
          $("#e-lecture").html("slide " + slide + " (" + 25 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '4') {
          $("#e-lecture").html("slide " + slide + " (" + 26 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '4-1') {
          $("#e-lecture").html("slide " + slide + " (" + 28 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '5') {
          $("#e-lecture").html("slide " + slide + " (" + 30 + "%)");
          
          showActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '6') {
          $("#e-lecture").html("slide " + slide + " (" + 32 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '6-1') {
          $("#e-lecture").html("slide " + slide + " (" + 34 + "%)");
          GraphVisu(true , true , 'tree');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '6-2') {
          $("#e-lecture").html("slide " + slide + " (" + 36 + "%)");
          GraphVisu(true , true , 'star');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '6-3') {
          $("#e-lecture").html("slide " + slide + " (" + 38 + "%)");
          GraphVisu(true , true , 'tree');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '6-4') {
          $("#e-lecture").html("slide " + slide + " (" + 40 + "%)");
          GraphVisu(true , true , 'binarytree');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '6-5') {
          $("#e-lecture").html("slide " + slide + " (" + 42 + "%)");
          GraphVisu(true , false, 'k5');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '6-6') {
          $("#e-lecture").html("slide " + slide + " (" + 44 + "%)");
          GraphVisu(true , true , 'bipartite');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '6-7') {
          $("#e-lecture").html("slide " + slide + " (" + 46 + "%)");
          GraphVisu(false, false, 'sssp');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '7') {
          $("#e-lecture").html("slide " + slide + " (" + 48 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '7-1') {
          $("#e-lecture").html("slide " + slide + " (" + 50 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '7-2') {
          $("#e-lecture").html("slide " + slide + " (" + 51 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '7-3') {
          $("#e-lecture").html("slide " + slide + " (" + 53 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '7-4') {
          $("#e-lecture").html("slide " + slide + " (" + 55 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '7-5') {
          $("#e-lecture").html("slide " + slide + " (" + 57 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '7-6') {
          $("#e-lecture").html("slide " + slide + " (" + 59 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '7-7') {
          $("#e-lecture").html("slide " + slide + " (" + 61 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '7-8') {
          $("#e-lecture").html("slide " + slide + " (" + 63 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '7-9') {
          $("#e-lecture").html("slide " + slide + " (" + 65 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '7-10') {
          $("#e-lecture").html("slide " + slide + " (" + 67 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '7-11') {
          $("#e-lecture").html("slide " + slide + " (" + 69 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '8') {
          $("#e-lecture").html("slide " + slide + " (" + 71 + "%)");
          GraphVisu(true , true , 'CP3Fig2.4');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '8-1') {
          $("#e-lecture").html("slide " + slide + " (" + 73 + "%)");
          GraphVisu(true , true , 'CP3Fig2.4');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '8-2') {
          $("#e-lecture").html("slide " + slide + " (" + 75 + "%)");
          GraphVisu(true , true , 'CP3Fig2.4');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '8-3') {
          $("#e-lecture").html("slide " + slide + " (" + 76 + "%)");
          GraphVisu(true , true , 'CP3Fig2.4');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '8-4') {
          $("#e-lecture").html("slide " + slide + " (" + 78 + "%)");
          GraphVisu(true , true , 'CP3Fig2.4');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '8-5') {
          $("#e-lecture").html("slide " + slide + " (" + 80 + "%)");
          GraphVisu(true , true , 'CP3Fig2.4');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '8-6') {
          $("#e-lecture").html("slide " + slide + " (" + 82 + "%)");
          GraphVisu(true , true , 'CP3Fig2.4');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '8-7') {
          $("#e-lecture").html("slide " + slide + " (" + 84 + "%)");
          GraphVisu(true , true , 'CP3Fig2.4');
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '8-8') {
          $("#e-lecture").html("slide " + slide + " (" + 86 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '8-9') {
          $("#e-lecture").html("slide " + slide + " (" + 88 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '8-10') {
          $("#e-lecture").html("slide " + slide + " (" + 90 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '9') {
          $("#e-lecture").html("slide " + slide + " (" + 92 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '9-1') {
          $("#e-lecture").html("slide " + slide + " (" + 94 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '9-2') {
          $("#e-lecture").html("slide " + slide + " (" + 96 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '9-3') {
          $("#e-lecture").html("slide " + slide + " (" + 98 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '9-4') {
          $("#e-lecture").html("slide " + slide + " (" + 100 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
      }

      window.onpopstate = function(event) {
        var slide = event.state['slide'];
        openSlide(slide, function() {
          runSlide(slide);
        });
      };

      function getUrlParameter(sParam) {
        var sPageURL = decodeURIComponent(window.location.search.substring(1)),
        sURLVariables = sPageURL.split('&'), sParameterName, i;

        for (i = 0; i < sURLVariables.length; i++) {
          sParameterName = sURLVariables[i].split('=');
          if (sParameterName[0] === sParam) return sParameterName[1] === undefined ? true : sParameterName[1];
        }
      };

      function pushState(slideValue) {
        var url = '/zh/graphds';
        if (typeof slideValue != 'undefined' && slideValue != null) url += '?slide=' + slideValue;
        window.history.pushState({slide: slideValue}, "slide " + slideValue, url);
      }

      function showPopup(callback) {
        $('#popup').fadeIn(100, callback);
      }

      function hidePopup(callback) {
        $('#popup').fadeOut(100, callback);
      }

      function showOverlay() {
        $('#overlay').css('opacity', 0.5); 
        $('#overlay').show();
      }

      function hideOverlay() {
        $('#overlay').hide();
        $("#e-lecture").html("");
      }

      function makeOverlayTransparent() {
        $('#overlay').css('opacity', 0);
      }

      function hideSlide(callback) {
        isPlaying = true;
        closeSlide(cur_slide, function() {
          makeOverlayTransparent();
          setTimeout(callback, 700); // don't immediately run the animation, wait for 500ms+ first
        });
      }

      function showSlide() {
        isPlaying = false;
        openSlide(cur_slide);
        showOverlay();
      }

      $(function() {
        var slide = getUrlParameter('slide');
        
        $.get('/hasvisited' + '/graphds', function(data) {
          var hasVisited = data['hasvisited'] == '1';
          if (!hasVisited) {
            var postData = {
              '_token': 'kaTPcaTtnnJPvGspW7LRTya6UONjjAL7yXZSCSBh',
              'page': '/graphds'.substring(1),
            };

            $.post("/visitpage", postData, function(data) {
              // non critical request...
            });

            if (typeof slide != undefined && slide != null) {
              cur_slide = slide;
            }

            $("#mode-menu a").trigger("click");
          }
          else {
            if (typeof slide != undefined && slide != null) {
              cur_slide = slide;
              $('#mode-menu a').click();
            }    
          }
        }).fail(function() {
          if (typeof slide != undefined && slide != null) {
            cur_slide = slide;
            $('#mode-menu a').click();
          }
        });

        $('.mcq-submit').click(function() {
          var questionId = parseInt($(this).attr('id').split('-')[1]);
          var answer = $('#mcq-answer-' + questionId).val();
          var userAnswer = $('input[type=radio][name=mcq-'+questionId+'-choice]:checked').val();

          if (answer === userAnswer) {
            $('#answer-status-' + questionId).html('<font color="green"><b>Correct!</b></font>');
          }
          else {
            $('#answer-status-' + questionId).html('<font color="red"><b>Wrong Answer! Try again...</b></font>');
          }
          $('#answer-status-' + questionId).show();
          setTimeout(function() {
            $('#answer-status-' + questionId).fadeOut(1000);
          }, 1000);
        });

        $('.msq-submit').click(function() {
          var questionId = parseInt($(this).attr('id').split('-')[1]);
          var answer = $('#msq-answer-' + questionId).val();

          var answers = [];
          $('input[type=checkbox][class=msq-choice]:checked').each(function() {
            answers.push($(this).attr('id').split('-')[3]);
          });
          answers.sort();
          var userAnswer = answers.join(',');

          if (answer === userAnswer) {
            $('#answer-status-' + questionId).html('<font color="green">Correct!</font>');
          }
          else {
            $('#answer-status-' + questionId).html('<font color="red">Wrong Answer! Try again...</font>');
          }
          $('#answer-status-' + questionId).show();
          setTimeout(function() {
            $('#answer-status-' + questionId).fadeOut(1000);
          }, 1000);
        });

        $('select.lecture-dropdown').change(function() {
          var nextSlide = $(this).val();
          openSlide(nextSlide, function() {
            runSlide(nextSlide);
            pushState(nextSlide);
          });
        });

        $('#hide-popup').click(function() {
          hidePopup();
        });

        $('#popup').hover(function() {
          $('#hide-popup').show();
        }, function() {
          $('#hide-popup').hide();
        });

        $('#electure-1 .electure-next').click(function() {
          hidePopup();
          runSlide('1-1');
          pushState('1-1');
        });
      
        $('#electure-1-1 .electure-next').click(function() {
          hidePopup();
          runSlide('1-2');
          pushState('1-2');
        });
        $('#electure-1-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('1');
          pushState('1');
        });
      
        $('#electure-1-2 .electure-next').click(function() {
          hidePopup();
          runSlide('1-3');
          pushState('1-3');
        });
        $('#electure-1-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('1-1');
          pushState('1-1');
        });
      
        $('#electure-1-3 .electure-next').click(function() {
          hidePopup();
          runSlide('1-4');
          pushState('1-4');
        });
        $('#electure-1-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('1-2');
          pushState('1-2');
        });
      
        $('#electure-1-4 .electure-next').click(function() {
          hidePopup();
          runSlide('1-5');
          pushState('1-5');
        });
        $('#electure-1-4 .electure-prev').click(function() {
          hidePopup();
          runSlide('1-3');
          pushState('1-3');
        });
      
        $('#electure-1-5 .electure-next').click(function() {
          hidePopup();
          runSlide('1-6');
          pushState('1-6');
        });
        $('#electure-1-5 .electure-prev').click(function() {
          hidePopup();
          runSlide('1-4');
          pushState('1-4');
        });
      
        $('#electure-1-6 .electure-next').click(function() {
          hidePopup();
          runSlide('1-7');
          pushState('1-7');
        });
        $('#electure-1-6 .electure-prev').click(function() {
          hidePopup();
          runSlide('1-5');
          pushState('1-5');
        });
      
        $('#electure-1-7 .electure-next').click(function() {
          hidePopup();
          runSlide('2');
          pushState('2');
        });
        $('#electure-1-7 .electure-prev').click(function() {
          hidePopup();
          runSlide('1-6');
          pushState('1-6');
        });
      
        $('#electure-2 .electure-next').click(function() {
          hidePopup();
          runSlide('2-1');
          pushState('2-1');
        });
        $('#electure-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('1-7');
          pushState('1-7');
        });
      
        $('#electure-2-1 .electure-next').click(function() {
          hidePopup();
          runSlide('2-2');
          pushState('2-2');
        });
        $('#electure-2-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('2');
          pushState('2');
        });
      
        $('#electure-2-2 .electure-next').click(function() {
          hidePopup();
          runSlide('2-3');
          pushState('2-3');
        });
        $('#electure-2-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('2-1');
          pushState('2-1');
        });
      
        $('#electure-2-3 .electure-next').click(function() {
          hidePopup();
          runSlide('3');
          pushState('3');
        });
        $('#electure-2-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('2-2');
          pushState('2-2');
        });
      
        $('#electure-3 .electure-next').click(function() {
          hidePopup();
          runSlide('4');
          pushState('4');
        });
        $('#electure-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('2-3');
          pushState('2-3');
        });
      
        $('#electure-4 .electure-next').click(function() {
          hidePopup();
          runSlide('4-1');
          pushState('4-1');
        });
        $('#electure-4 .electure-prev').click(function() {
          hidePopup();
          runSlide('3');
          pushState('3');
        });
      
        $('#electure-4-1 .electure-next').click(function() {
          hidePopup();
          runSlide('5');
          pushState('5');
        });
        $('#electure-4-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('4');
          pushState('4');
        });
      
        $('#electure-5 .electure-next').click(function() {
          hidePopup();
          runSlide('6');
          pushState('6');
        });
        $('#electure-5 .electure-prev').click(function() {
          hidePopup();
          runSlide('4-1');
          pushState('4-1');
        });
      
        $('#electure-6 .electure-next').click(function() {
          hidePopup();
          runSlide('6-1');
          pushState('6-1');
        });
        $('#electure-6 .electure-prev').click(function() {
          hidePopup();
          runSlide('5');
          pushState('5');
        });
      
        $('#electure-6-1 .electure-next').click(function() {
          hidePopup();
          runSlide('6-2');
          pushState('6-2');
        });
        $('#electure-6-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('6');
          pushState('6');
        });
      
        $('#electure-6-2 .electure-next').click(function() {
          hidePopup();
          runSlide('6-3');
          pushState('6-3');
        });
        $('#electure-6-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('6-1');
          pushState('6-1');
        });
      
        $('#electure-6-3 .electure-next').click(function() {
          hidePopup();
          runSlide('6-4');
          pushState('6-4');
        });
        $('#electure-6-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('6-2');
          pushState('6-2');
        });
      
        $('#electure-6-4 .electure-next').click(function() {
          hidePopup();
          runSlide('6-5');
          pushState('6-5');
        });
        $('#electure-6-4 .electure-prev').click(function() {
          hidePopup();
          runSlide('6-3');
          pushState('6-3');
        });
      
        $('#electure-6-5 .electure-next').click(function() {
          hidePopup();
          runSlide('6-6');
          pushState('6-6');
        });
        $('#electure-6-5 .electure-prev').click(function() {
          hidePopup();
          runSlide('6-4');
          pushState('6-4');
        });
      
        $('#electure-6-6 .electure-next').click(function() {
          hidePopup();
          runSlide('6-7');
          pushState('6-7');
        });
        $('#electure-6-6 .electure-prev').click(function() {
          hidePopup();
          runSlide('6-5');
          pushState('6-5');
        });
      
        $('#electure-6-7 .electure-next').click(function() {
          hidePopup();
          runSlide('7');
          pushState('7');
        });
        $('#electure-6-7 .electure-prev').click(function() {
          hidePopup();
          runSlide('6-6');
          pushState('6-6');
        });
      
        $('#electure-7 .electure-next').click(function() {
          hidePopup();
          runSlide('7-1');
          pushState('7-1');
        });
        $('#electure-7 .electure-prev').click(function() {
          hidePopup();
          runSlide('6-7');
          pushState('6-7');
        });
      
        $('#electure-7-1 .electure-next').click(function() {
          hidePopup();
          runSlide('7-2');
          pushState('7-2');
        });
        $('#electure-7-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('7');
          pushState('7');
        });
      
        $('#electure-7-2 .electure-next').click(function() {
          hidePopup();
          runSlide('7-3');
          pushState('7-3');
        });
        $('#electure-7-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('7-1');
          pushState('7-1');
        });
      
        $('#electure-7-3 .electure-next').click(function() {
          hidePopup();
          runSlide('7-4');
          pushState('7-4');
        });
        $('#electure-7-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('7-2');
          pushState('7-2');
        });
      
        $('#electure-7-4 .electure-next').click(function() {
          hidePopup();
          runSlide('7-5');
          pushState('7-5');
        });
        $('#electure-7-4 .electure-prev').click(function() {
          hidePopup();
          runSlide('7-3');
          pushState('7-3');
        });
      
        $('#electure-7-5 .electure-next').click(function() {
          hidePopup();
          runSlide('7-6');
          pushState('7-6');
        });
        $('#electure-7-5 .electure-prev').click(function() {
          hidePopup();
          runSlide('7-4');
          pushState('7-4');
        });
      
        $('#electure-7-6 .electure-next').click(function() {
          hidePopup();
          runSlide('7-7');
          pushState('7-7');
        });
        $('#electure-7-6 .electure-prev').click(function() {
          hidePopup();
          runSlide('7-5');
          pushState('7-5');
        });
      
        $('#electure-7-7 .electure-next').click(function() {
          hidePopup();
          runSlide('7-8');
          pushState('7-8');
        });
        $('#electure-7-7 .electure-prev').click(function() {
          hidePopup();
          runSlide('7-6');
          pushState('7-6');
        });
      
        $('#electure-7-8 .electure-next').click(function() {
          hidePopup();
          runSlide('7-9');
          pushState('7-9');
        });
        $('#electure-7-8 .electure-prev').click(function() {
          hidePopup();
          runSlide('7-7');
          pushState('7-7');
        });
      
        $('#electure-7-9 .electure-next').click(function() {
          hidePopup();
          runSlide('7-10');
          pushState('7-10');
        });
        $('#electure-7-9 .electure-prev').click(function() {
          hidePopup();
          runSlide('7-8');
          pushState('7-8');
        });
      
        $('#electure-7-10 .electure-next').click(function() {
          hidePopup();
          runSlide('7-11');
          pushState('7-11');
        });
        $('#electure-7-10 .electure-prev').click(function() {
          hidePopup();
          runSlide('7-9');
          pushState('7-9');
        });
      
        $('#electure-7-11 .electure-next').click(function() {
          hidePopup();
          runSlide('8');
          pushState('8');
        });
        $('#electure-7-11 .electure-prev').click(function() {
          hidePopup();
          runSlide('7-10');
          pushState('7-10');
        });
      
        $('#electure-8 .electure-next').click(function() {
          hidePopup();
          runSlide('8-1');
          pushState('8-1');
        });
        $('#electure-8 .electure-prev').click(function() {
          hidePopup();
          runSlide('7-11');
          pushState('7-11');
        });
      
        $('#electure-8-1 .electure-next').click(function() {
          hidePopup();
          runSlide('8-2');
          pushState('8-2');
        });
        $('#electure-8-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('8');
          pushState('8');
        });
      
        $('#electure-8-2 .electure-next').click(function() {
          hidePopup();
          runSlide('8-3');
          pushState('8-3');
        });
        $('#electure-8-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('8-1');
          pushState('8-1');
        });
      
        $('#electure-8-3 .electure-next').click(function() {
          hidePopup();
          runSlide('8-4');
          pushState('8-4');
        });
        $('#electure-8-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('8-2');
          pushState('8-2');
        });
      
        $('#electure-8-4 .electure-next').click(function() {
          hidePopup();
          runSlide('8-5');
          pushState('8-5');
        });
        $('#electure-8-4 .electure-prev').click(function() {
          hidePopup();
          runSlide('8-3');
          pushState('8-3');
        });
      
        $('#electure-8-5 .electure-next').click(function() {
          hidePopup();
          runSlide('8-6');
          pushState('8-6');
        });
        $('#electure-8-5 .electure-prev').click(function() {
          hidePopup();
          runSlide('8-4');
          pushState('8-4');
        });
      
        $('#electure-8-6 .electure-next').click(function() {
          hidePopup();
          runSlide('8-7');
          pushState('8-7');
        });
        $('#electure-8-6 .electure-prev').click(function() {
          hidePopup();
          runSlide('8-5');
          pushState('8-5');
        });
      
        $('#electure-8-7 .electure-next').click(function() {
          hidePopup();
          runSlide('8-8');
          pushState('8-8');
        });
        $('#electure-8-7 .electure-prev').click(function() {
          hidePopup();
          runSlide('8-6');
          pushState('8-6');
        });
      
        $('#electure-8-8 .electure-next').click(function() {
          hidePopup();
          runSlide('8-9');
          pushState('8-9');
        });
        $('#electure-8-8 .electure-prev').click(function() {
          hidePopup();
          runSlide('8-7');
          pushState('8-7');
        });
      
        $('#electure-8-9 .electure-next').click(function() {
          hidePopup();
          runSlide('8-10');
          pushState('8-10');
        });
        $('#electure-8-9 .electure-prev').click(function() {
          hidePopup();
          runSlide('8-8');
          pushState('8-8');
        });
      
        $('#electure-8-10 .electure-next').click(function() {
          hidePopup();
          runSlide('9');
          pushState('9');
        });
        $('#electure-8-10 .electure-prev').click(function() {
          hidePopup();
          runSlide('8-9');
          pushState('8-9');
        });
      
        $('#electure-9 .electure-next').click(function() {
          hidePopup();
          runSlide('9-1');
          pushState('9-1');
        });
        $('#electure-9 .electure-prev').click(function() {
          hidePopup();
          runSlide('8-10');
          pushState('8-10');
        });
      
        $('#electure-9-1 .electure-next').click(function() {
          hidePopup();
          runSlide('9-2');
          pushState('9-2');
        });
        $('#electure-9-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('9');
          pushState('9');
        });
      
        $('#electure-9-2 .electure-next').click(function() {
          hidePopup();
          runSlide('9-3');
          pushState('9-3');
        });
        $('#electure-9-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('9-1');
          pushState('9-1');
        });
      
        $('#electure-9-3 .electure-next').click(function() {
          hidePopup();
          runSlide('9-4');
          pushState('9-4');
        });
        $('#electure-9-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('9-2');
          pushState('9-2');
        });
      
        $('#electure-9-4 .electure-prev').click(function() {
          hidePopup();
          runSlide('9-3');
          pushState('9-3');
        });
      
 

        // temporary quick fix for Google Chrome Aug 2016 issue..., put at last part so that everything else has been loaded
        // setTimeout(function(){ document.body.style.zoom = "100.1%"; }, 500);
        // setTimeout(function(){ document.body.style.zoom = "100%"; }, 600);
        // I turn it off on 14 June 2018, seems 'ok'?
      });

      function doButtonAction109() {
        GraphVisu(true, true, 'CP2.5C');
      }

      function adjustPopupToImageSize() {
        var width = $('#popup-image').prop('width');
        var height = $('#popup-image').prop('height');
        $('#popup').width(width + 20);
        $('#popup').height(height + 20);
        if (width == 0 && height == 0) {
          setTimeout(adjustPopupToImageSize, 200);
        } else {
          showPopup();  
        }
      }

      function POPUP_IMAGE(url) {
        $('#popup-content').html('<img id="popup-image" src="' + url + '">');
        adjustPopupToImageSize();
      }

      function URL(url) {
        window.open(url, '_blank');
      }

      // Implement these functions in each visualisation
      // This function will be called before entering e-Lecture Mode
      function ENTER_LECTURE_MODE() {}

      // This function will be called before returning to Explore Mode
      function ENTER_EXPLORE_MODE() {}

      // Lecture action functions
      function CUSTOM_ACTION(action, data, mode) {}
    </script>
<script>
function toggleActionMenu() {
  $("#actions").toggle();
}

// Graph DS actions
var actionsWidth = 170;

function hideEntireActionsPanel() {
  hideActionsPanel();
}

$(function() {
  var options;
  $("#menu1").on('click', function() {
    options = ['CP3Fig2.4', 'CP3Fig2.4_disjoint', 'tree', 'bipartite'];
    GraphVisu(true, true, options[Math.floor(Math.random()*4)]);
  });
  $("#menu2").on('click', function() {
    options = ['CP3Fig4.10', 'k5', 'star'];
    GraphVisu(true, false, options[Math.floor(Math.random()*3)]);
  });
  $("#menu3").on('click', function() {
    options = ['CP3Fig4.4', 'cyclic'];
    GraphVisu(false, true, options[Math.floor(Math.random()*2)]);
  });
  $("#menu4").on('click', function() {
    options = ['CP3Fig4.26B', 'sssp'];
    GraphVisu(false, false, options[Math.floor(Math.random()*2)]);
  });

  $("#menu"+(Math.floor(Math.random()*4)+1)).click(); // random :O
});

function GraphVisu(arg1, arg2, arg3) {
  var menu = (arg1 === false ? 1 : 0) * 2 + (arg2 === false ? 1 : 0) + 1; // toggle correct menu item
  $("#menu1").removeClass('selected-viz');
  $("#menu1").html("U/U");
  $("#menu2").removeClass('selected-viz');
  $("#menu2").html("U/W");
  $("#menu3").removeClass('selected-viz');
  $("#menu3").html("D/U");
  $("#menu4").removeClass('selected-viz');
  $("#menu4").html("D/W");
  $("#menu"+menu.toString()).toggleClass('selected-viz');
  switch (menu) {
    case 1: $("#menu1").html("无方向的/无权重的"); break;
    case 2: $("#menu2").html("无方向的/有权重的"); break;
    case 3: $("#menu3").html("有方向的/无权重的"); break;
    case 4: $("#menu4").html("有方向的/有权重的"); break;
  }
  window.scrollTo(0, 100);
  var UNDIRECTED = arg1, UNWEIGHTED = arg2;
  var maxNumberVertex = 10;
  var grid = 20;
  var width = 640, height = 360, colors = d3.scale.category10();

  // clear stuff
  d3.select("#viz")
    .selectAll('svg')
    .remove();
  var svg = d3
    .select('#viz')
    .append('svg')
    .attr('width', width)
    .attr('height', height);

  var countNodeId = new Array(maxNumberVertex);
  for (var i = countNodeId.length; i >= 0; i--) countNodeId[i] = 0;

  var nodes = [
    {id: 0, x: 160, y: 90},
    {id: 1, x: 320, y: 180},
    {id: 2, x: 480, y: 270}
  ];
  var lastNodeId = 3;

  var links;
  if (UNWEIGHTED === true)
    links = [
      {source: nodes[0], target: nodes[1]},
      {source: nodes[1], target: nodes[2]}
    ];
  else
    links = [
      {source: nodes[0], target: nodes[1], weight: 2},
      {source: nodes[1], target: nodes[2], weight: 3}
    ];

  // if (arg3 === "CP4.2") {
  //   nodes = [{id:0,x:220,y:100},{id:1,x:220,y:200},{id:2,x:220,y:300},{id:3,x:220,y:400},{id:4,x:360,y:100},{id:5,x:360,y:200},{id:6,x:360,y:400},{id:7,x:500,y:100},{id:8,x:500,y:200},{id:9,x:500,y:400}];
  //   links = [{source:{id:0,x:220,y:100},target:{id:1,x:220,y:200}},{source:{id:1,x:220,y:200},target:{id:2,x:220,y:300}},{source:{id:0,x:220,y:100},target:{id:4,x:360,y:100}},{source:{id:4,x:360,y:100},target:{id:7,x:500,y:100}},{source:{id:5,x:360,y:200},target:{id:8,x:500,y:200}},{source:{id:4,x:360,y:100},target:{id:5,x:360,y:200}},{source:{id:5,x:360,y:200},target:{id:6,x:360,y:400}},{source:{id:7,x:500,y:100},target:{id:8,x:500,y:200}},{source:{id:8,x:500,y:200},target:{id:9,x:500,y:400}},{source:{id:2,x:220,y:300},target:{id:3,x:220,y:400}},{source:{id:3,x:220,y:400},target:{id:6,x:360,y:400}},{source:{id:6,x:360,y:400},target:{id:9,x:500,y:400}}];
  // }

  // if (arg3 === "CP4.5") {
  //   nodes = [{id:0,x:200,y:100},{id:1,x:400,y:100},{id:2,x:580,y:100},{id:3,x:200,y:240},{id:4,x:400,y:240},{id:5,x:580,y:240}];
  //   links = [{source:{id:0,x:200,y:100},target:{id:1,x:400,y:100}},{source:{id:1,x:400,y:100},target:{id:2,x:580,y:100}},{source:{id:1,x:400,y:100},target:{id:3,x:200,y:240}},{source:{id:1,x:400,y:100},target:{id:4,x:400,y:240}},{source:{id:4,x:400,y:240},target:{id:5,x:580,y:240}},{source:{id:1,x:400,y:100},target:{id:5,x:580,y:240}}];
  // }

  // if (arg3 === "CP2.5A") {
  //   nodes = [{id:0,x:100,y:100},{id:1,x:100,y:200},{id:2,x:100,y:300},{id:3,x:260,y:100},{id:4,x:260,y:200},{id:5,x:260,y:300},{id:6,x:420,y:100},{id:7,x:420,y:200},{id:8,x:420,y:300}];
  //   links = [{source:{id:0,x:100,y:100},target:{id:1,x:100,y:200}},{source:{id:1,x:100,y:200},target:{id:2,x:100,y:300}},{source:{id:2,x:100,y:300},target:{id:5,x:260,y:300}},{source:{id:5,x:260,y:300},target:{id:8,x:420,y:300}},{source:{id:8,x:420,y:300},target:{id:7,x:420,y:200}},{source:{id:7,x:420,y:200},target:{id:6,x:420,y:100}}];
  // }

  // if (arg3 === "CP2.5B") {
  //   nodes = [{id:0,x:100,y:100},{id:1,x:100,y:200},{id:2,x:100,y:300},{id:3,x:260,y:100},{id:4,x:260,y:200},{id:5,x:260,y:300},{id:6,x:420,y:100},{id:7,x:420,y:200},{id:8,x:420,y:300}];
  //   links = [{source:{id:0,x:100,y:100},target:{id:1,x:100,y:200}},{source:{id:1,x:100,y:200},target:{id:2,x:100,y:300}},{source:{id:2,x:100,y:300},target:{id:5,x:260,y:300}},{source:{id:5,x:260,y:300},target:{id:8,x:420,y:300}},{source:{id:8,x:420,y:300},target:{id:7,x:420,y:200}},{source:{id:7,x:420,y:200},target:{id:6,x:420,y:100}},{source:{id:3,x:260,y:100},target:{id:4,x:260,y:200}},{source:{id:4,x:260,y:200},target:{id:5,x:260,y:300}},{source:{id:1,x:100,y:200},target:{id:4,x:260,y:200}},{source:{id:0,x:100,y:100},target:{id:3,x:260,y:100}}];
  // }

  // will make two examples per category later?
  if (arg3 === "CP3Fig2.4") {
    nodes = [
      {id: 0, x: 220, y: 270},
      {id: 1, x: 120, y: 180},
      {id: 2, x: 320, y: 180},
      {id: 3, x: 120, y: 90},
      {id: 4, x: 320, y: 90},
      {id: 5, x: 520, y: 90},
      {id: 6, x: 520, y: 180}
    ];
    links = [
      {source: {id: 0}, target: {id: 1}},
      {source: {id: 1}, target: {id: 2}},
      {source: {id: 3}, target: {id: 1}},
      {source: {id: 3}, target: {id: 4}},
      {source: {id: 4}, target: {id: 2}},
      {source: {id: 4}, target: {id: 5}},
      {source: {id: 5}, target: {id: 6}},
      {source: {id: 2}, target: {id: 0}}
    ];
  }
  else if (arg3 === "CP3Fig2.4_disjoint") {
    nodes = [
      {id: 0, x: 220, y: 270},
      {id: 1, x: 120, y: 180},
      {id: 2, x: 320, y: 180},
      {id: 3, x: 120, y: 90},
      {id: 4, x: 320, y: 90},
      {id: 5, x: 520, y: 90},
      {id: 6, x: 520, y: 180}
    ];
    links = [
      {source: {id: 0}, target: {id: 1}},
      {source: {id: 1}, target: {id: 2}},
      {source: {id: 3}, target: {id: 1}},
      {source: {id: 3}, target: {id: 4}},
      {source: {id: 4}, target: {id: 2}},
      {source: {id: 5}, target: {id: 6}},
      {source: {id: 2}, target: {id: 0}}
    ];
  }
  else if (arg3 === "tree") {
    nodes = [
      {id: 0, x: 320, y: 50},
      {id: 1, x: 160, y: 125},
      {id: 2, x: 100, y: 200},
      {id: 3, x: 160, y: 200},
      {id: 4, x: 140, y: 275},
      {id: 5, x: 180, y: 275},
      {id: 6, x: 220, y: 200},
      {id: 7, x: 480, y: 125},
      {id: 8, x: 400, y: 200},
      {id: 9, x: 560, y: 200}
    ];
    links = [
      {source: {id: 0}, target: {id: 1}},
      {source: {id: 1}, target: {id: 2}},
      {source: {id: 1}, target: {id: 3}},
      {source: {id: 3}, target: {id: 4}},
      {source: {id: 3}, target: {id: 5}},
      {source: {id: 1}, target: {id: 6}},
      {source: {id: 0}, target: {id: 7}},
      {source: {id: 7}, target: {id: 8}},
      {source: {id: 7}, target: {id: 9}}
    ];
  }
  else if (arg3 === "binarytree") {
    nodes = [
      {id: 0, x: 320, y: 50},
      {id: 1, x: 160, y: 125},
      {id: 2, x: 100, y: 200},
      {id: 4, x: 200, y: 275},
      {id: 5, x: 240, y: 275},
      {id: 6, x: 220, y: 200},
      {id: 7, x: 480, y: 125},
      {id: 8, x: 400, y: 200},
      {id: 3, x: 560, y: 200}
    ];
    links = [
      {source: {id: 0}, target: {id: 1}},
      {source: {id: 0}, target: {id: 7}},
      {source: {id: 1}, target: {id: 2}},
      {source: {id: 1}, target: {id: 6}},
      {source: {id: 6}, target: {id: 4}},
      {source: {id: 6}, target: {id: 5}},
      {source: {id: 7}, target: {id: 8}},
      {source: {id: 7}, target: {id: 3}}
    ];
  }
  else if (arg3 === "bipartite") {
    nodes = [
      {id: 0, x: 200, y: 50},
      {id: 1, x: 200, y: 110},
      {id: 2, x: 200, y: 170},
      {id: 3, x: 200, y: 230},
      {id: 4, x: 200, y: 290},
      {id: 5, x: 400, y: 50},
      {id: 6, x: 400, y: 110},
      {id: 7, x: 400, y: 170},
      {id: 8, x: 400, y: 230}
    ];
    links = [
      {source: {id: 0}, target: {id: 5}},
      {source: {id: 0}, target: {id: 6}},
      {source: {id: 1}, target: {id: 6}},
      {source: {id: 2}, target: {id: 7}},
      {source: {id: 3}, target: {id: 7}},
      {source: {id: 4}, target: {id: 7}}
    ];
  }
  else if (arg3 === "CP2.5C") {
    nodes = [
      {id: 0, x: 100, y: 75},
      {id: 1, x: 100, y: 175},
      {id: 2, x: 100, y: 275},
      {id: 3, x: 250, y: 75},
      {id: 4, x: 250, y: 175},
      {id: 5, x: 250, y: 275},
      {id: 6, x: 400, y: 75},
      {id: 7, x: 400, y: 175},
      {id: 8, x: 400, y: 275},
      {id: 9, x: 550, y: 75}
    ];
    links = [
      {source: {id: 0}, target: {id: 5}},
      {source: {id: 0}, target: {id: 7}},
      {source: {id: 1}, target: {id: 6}},
      {source: {id: 1}, target: {id: 8}},
      {source: {id: 2}, target: {id: 3}},
      {source: {id: 2}, target: {id: 7}},
      {source: {id: 3}, target: {id: 8}},
      {source: {id: 4}, target: {id: 9}},
      {source: {id: 5}, target: {id: 6}},
      {source: {id: 8}, target: {id: 9}}
    ];
  }
  else if (arg3 === "CP3Fig4.10") {
    nodes = [
      {id: 0, x: 220, y: 130},
      {id: 1, x: 320, y: 30},
      {id: 2, x: 420, y: 130},
      {id: 3, x: 320, y: 230},
      {id: 4, x: 220, y: 330}
    ];
    links = [
      {source: {id: 0}, target: {id: 1}, weight: "4"},
      {source: {id: 1}, target: {id: 2}, weight: "2"},
      {source: {id: 2}, target: {id: 3}, weight: "8"},
      {source: {id: 3}, target: {id: 0}, weight: "6"},
      {source: {id: 0}, target: {id: 2}, weight: "4"},
      {source: {id: 3}, target: {id: 4}, weight: "9"},
      {source: {id: 4}, target: {id: 0}, weight: "6"}
    ];
  }
  else if (arg3 === "k5") {
    nodes = [
      {id: 0, x: 160, y: 130},
      {id: 1, x: 480, y: 130},
      {id: 2, x: 220, y: 290},
      {id: 3, x: 320, y: 50},
      {id: 4, x: 420, y: 290}];
    links = [
      {source: {id: 0}, target: {id: 1}, weight: "1"},
      {source: {id: 1}, target: {id: 2}, weight: "2"},
      {source: {id: 2}, target: {id: 3}, weight: "3"},
      {source: {id: 3}, target: {id: 4}, weight: "4"},
      {source: {id: 4}, target: {id: 0}, weight: "5"},
      {source: {id: 0}, target: {id: 3}, weight: "6"},
      {source: {id: 3}, target: {id: 1}, weight: "7"},
      {source: {id: 1}, target: {id: 4}, weight: "8"},
      {source: {id: 4}, target: {id: 2}, weight: "9"},
      {source: {id: 2}, target: {id: 0}, weight: "10"}
    ];
  }
  else if (arg3 === "star") {
    nodes = [
      {id: 0, x: 300, y: 160},
      {id: 1, x: 300, y: 60},
      {id: 2, x: 380, y: 120},
      {id: 3, x: 340, y: 240},
      {id: 4, x: 260, y: 240},
      {id: 5, x: 220, y: 120}
    ];
    links = [
      {source: {id: 0}, target: {id: 1}, weight: "1"},
      {source: {id: 0}, target: {id: 2}, weight: "7"},
      {source: {id: 0}, target: {id: 3}, weight: "8"},
      {source: {id: 0}, target: {id: 4}, weight: "5"},
      {source: {id: 0}, target: {id: 5}, weight: "3"},
    ];
  }
  else if (arg3 === "CP3Fig4.4") {
    nodes = [
      {id: 0, x: 100, y: 100},
      {id: 1, x: 210, y: 100},
      {id: 2, x: 210, y: 210},
      {id: 3, x: 320, y: 100},
      {id: 4, x: 430, y: 100},
      {id: 5, x: 540, y: 100},
      {id: 6, x: 430, y: 210},
      {id: 7, x: 540, y: 210}
    ];
    links = [
      {source: {id: 0}, target: {id: 1}},
      {source: {id: 0}, target: {id: 2}},
      {source: {id: 1}, target: {id: 2}},
      {source: {id: 7}, target: {id: 6}},
      {source: {id: 2}, target: {id: 5}},
      {source: {id: 3}, target: {id: 4}},
      {source: {id: 1}, target: {id: 3}},
      {source: {id: 2}, target: {id: 3}}
    ];
  }
  else if (arg3 === "CP3Fig4.8") {
    nodes = [
      {id: 0, x: 100, y: 100},
      {id: 1, x: 210, y: 100},
      {id: 2, x: 210, y: 210},
      {id: 3, x: 320, y: 100},
      {id: 4, x: 430, y: 100},
      {id: 5, x: 540, y: 100},
      {id: 6, x: 430, y: 210},
      {id: 7, x: 540, y: 210}
    ];
    links = [
      {source: {id: 0}, target: {id: 1}},
      {source: {id: 1}, target: {id: 3}},
      {source: {id: 3}, target: {id: 2}},
      {source: {id: 2}, target: {id: 1}},
      {source: {id: 3}, target: {id: 4}},
      {source: {id: 4}, target: {id: 5}},
      {source: {id: 5}, target: {id: 7}},
      {source: {id: 7}, target: {id: 6}},
      {source: {id: 6}, target: {id: 4}}
    ];
  }
  else if (arg3 === "cyclic") {
    nodes = [
      {id: 0, x: 120, y: 250},
      {id: 1, x: 320, y: 100},
      {id: 2, x: 520, y: 250},
    ];
    links = [
      {source: {id: 0}, target: {id: 1}},
      {source: {id: 1}, target: {id: 2}},
      {source: {id: 2}, target: {id: 0}}
    ];
  }
  else if (arg3 === "CP3Fig4.26B") {
    nodes = [
      {id: 0, x: 95, y: 180},
      {id: 1, x: 245, y: 100},
      {id: 2, x: 245, y: 260},
      {id: 3, x: 395, y: 260},
      {id: 4, x: 545, y: 180}
    ];
    links = [
      {source: {id: 0}, target: {id: 1}, weight: "99"},
      {source: {id: 0}, target: {id: 2}, weight: "50"},
      {source: {id: 1}, target: {id: 2}, weight: "50"},
      {source: {id: 1}, target: {id: 3}, weight: "50"},
      {source: {id: 1}, target: {id: 4}, weight: "50"},
      {source: {id: 2}, target: {id: 3}, weight: "99"},
      {source: {id: 3}, target: {id: 4}, weight: "75"}
    ];
  }
  else if (arg3 === "sssp") {
    nodes = [
      {id: 0, x: 120, y: 250},
      {id: 1, x: 220, y: 100},
      {id: 2, x: 320, y: 250},
      {id: 3, x: 420, y: 100},
      {id: 4, x: 520, y: 250},
    ];
    links = [
      {source: {id: 0}, target: {id: 1}, weight: "2"},
      {source: {id: 0}, target: {id: 2}, weight: "7"},
      {source: {id: 1}, target: {id: 2}, weight: "4"},
      {source: {id: 2}, target: {id: 3}, weight: "1"},
      {source: {id: 2}, target: {id: 4}, weight: "4"},
      {source: {id: 3}, target: {id: 4}, weight: "2"},
    ];
  }

  // magic function
  lastNodeId = nodes.length;
  for (var i = 0; i < nodes.length; i++) countNodeId[nodes[i].id]++;

  for (var i = 0; i < links.length; i++)
    for (var j = 0; j < nodes.length; j++) {
      if (nodes[j].id === links[i].source.id) links[i].source = nodes[j];
      if (nodes[j].id === links[i].target.id) links[i].target = nodes[j];
    }
  // end of magic

  svg
    .append('svg:defs')
    .append('svg:marker')
    .attr('id', 'end-arrow')
    .attr('viewBox', '0 -5 10 10')
    .attr('refX', 6)
    .attr('markerWidth', 3)
    .attr('markerHeight', 3)
    .attr('orient', 'auto')
    .append('svg:path')
    .attr('d', 'M0,-5L10,0L0,5')
    .attr('fill', '#000');

  var drag_line = svg
    .append('svg:path')
    .attr('class', 'link dragline hidden')
    .attr('d', 'M0,0L0,0');

  var path, circle, weight;
  var selected_node = null,
      selected_link = null,
      mousedown_link = null,
      mousedown_node = null,
      mouseup_node = null;

  function resetMouseVars() {
    mousedown_node = null;
    mouseup_node = null;
    mousedown_link = null;
  }

  function restart() { // redraw everything
    svg
      .selectAll('g')
      .remove();

    path = svg
      .append('svg:g')
      .selectAll('path');

    circle = svg
      .append('svg:g')
      .selectAll('g');

    weight = svg
      .append('svg:g')
      .selectAll('text');

    circle = circle.data(nodes, function(d) {
      return d.id;
    });
    circle.selectAll('circle').style('fill', function (d) {
      return (d === selected_node) ? d3.rgb(colors(d.id)).brighter().toString() : colors(d.id);
    });

    var g = circle
      .enter()
      .append('svg:g');

    g .append('svg:circle')
      .attr('class', 'node')
      .attr('r', 16)
      .attr('cx', function (d) {
        return d.x;
      })
      .attr('cy', function (d) {
        return d.y;
      })
      .style('fill', function (d) {
        return (d === selected_node) ? d3.rgb(255, 138, 39) : d3.rgb(238, 238, 238);
      })
      .on('mousedown', function (d) {
        if (d3.event.ctrlKey) return;

        mousedown_node = d;
        if (mousedown_node === selected_node) selected_node = null;
        else selected_node = mousedown_node;

        selected_link = null;

        // reposition drag line
        drag_line
          .style('marker-end', 'url(#end-arrow)')
          .classed('hidden', false)
          .attr('d', 'M' + mousedown_node.x + ',' + mousedown_node.y + 'L' + mousedown_node.x + ',' + mousedown_node.y);

        restart();
      })
      .on('mouseup', function (d) {
        if (!mousedown_node) return;

        drag_line
          .classed('hidden', true)
          .style('marker-end', '');

        // check for drag-to-self
        mouseup_node = d;
        if (mouseup_node === mousedown_node) {
          resetMouseVars();
          return;
        }

        var source, target, direction;

        source = mousedown_node;
        target = mouseup_node;

        var link;

        if (UNDIRECTED === false) {
          link = links.filter(function (l) {
            return (l.source === source && l.target === target);
          })[0];
        }
        else {
          link = links.filter(function (l) {
            return (l.source === source && l.target === target) || (l.source === target && l.target === source);
          })[0];
        }

        if (!link) {
          if (UNWEIGHTED === false) {
            var dist = parseInt(Math.sqrt(Math.pow(source.x - target.x, 2) + Math.pow(source.y - target.y, 2)) / 100 + 1);
            link = {source: source, target: target, weight: dist};
            links.push(link);
          }
          else {
            link = {source: source, target: target};
            links.push(link);
          }
        }

        // select new link
        selected_link = link;
        selected_node = null;
        restart();
      });

    g .append('svg:text')
      .attr('x', function (d) {
        return d.x;
      })
      .attr('y', function (d) {
        return d.y + 16 / 3;
      })
      .attr('class', 'id')
      .text(function (d) {
        return d.id;
      });

    // drawing paths
    path = path
      .data(links);

    path
      .classed('selected', function (d) {
      return d === selected_link;
    });

    path
      .enter().append('svg:path')
      .attr('class', 'link')
      .classed('selected', function (d) {
        return d === selected_link;
      })
      .style('marker-end', function (d) {
        if (UNDIRECTED === false) return 'url(#end-arrow)';
      })
      .attr('d', function (d) {
        var deltaX = d.target.x - d.source.x,
            deltaY = d.target.y - d.source.y,
            dist = Math.sqrt(deltaX * deltaX + deltaY * deltaY),
            normX = deltaX / dist,
            normY = deltaY / dist,

        sourcePadding = 12;
        targetPadding = 17;
        if (UNDIRECTED === true) targetPadding = 12;
        sourceX = d.source.x + (sourcePadding * normX);
        sourceY = d.source.y + (sourcePadding * normY);
        targetX = d.target.x - (targetPadding * normX);
        targetY = d.target.y - (targetPadding * normY);

        if (UNDIRECTED === true)
          return 'M' + sourceX + ',' + sourceY + 'L' + targetX + ',' + targetY;

        // check if needs to draw curve or not ?
        var link;
        link = links.filter(function (l) {
          return (l.source === d.target && l.target === d.source);
        })[0];

        if (link) { // need arrow
          var type;
          if (d.source.id < d.target.id) type = 1; else type = 2;

          // change final point of arrow
          var finalX = arrowXY(sourceX, sourceY, targetX, targetY, type).x;
          var finalY = arrowXY(sourceX, sourceY, targetX, targetY, type).y;

          var beginX = arrowXY(targetX, targetY, sourceX, sourceY, type).x;
          var beginY = arrowXY(targetX, targetY, sourceX, sourceY, type).y;
          return 'M' + beginX + ',' + beginY + 'L' + finalX + ',' + finalY;
        }
        else // no need
          return 'M' + sourceX + ',' + sourceY + 'L' + targetX + ',' + targetY;
        // end check
      })
      .on('mousedown', function(d) {
        if (d3.event.ctrlKey) return;

        // select link
        mousedown_link = d;
        if (mousedown_link === selected_link) selected_link = null;
        else selected_link = mousedown_link;
        selected_node = null;
        restart();
      });

    if (UNWEIGHTED === false) { // start weight display
      weight = weight.data(links);

      weight
        .enter().append('svg:text')
        .attr('class', 'weight')
        .attr('x', function (d) {
          var type;
          if (d.source.id < d.target.id) type = 1; else type = 2;

          var link;
          link = links.filter(function (l) {
            return (l.source === d.target && l.target === d.source);
          })[0];

          var curve = 0;
          if (link) curve = 2;

          var x = weightXY(d.source.x, d.source.y, d.target.x, d.target.y, type, curve).x;
          return x;
        })
        .attr('y', function (d) {
          var type;
          if (d.source.id < d.target.id) type = 1; else type = 2;

          var link;
          link = links.filter(function (l) {
            return (l.source === d.target && l.target === d.source);
          })[0];

          var curve = 0;
          if (link) curve = 2;

          var y = weightXY(d.source.x, d.source.y, d.target.x, d.target.y, type, curve).y;
          return y;
        })
        .text(function (d) {
          return d.weight;
        });
    }

    var maxNodeId = -1;
    var countNode = nodes.length;
    var countEdge = links.length;
    var adjMat = [];
    var M = [];

    for (var i = 0; i < nodes.length; i++)
      if (nodes[i].id > maxNodeId)
        maxNodeId = nodes[i].id;

    maxNodeId++;
    // adjacency matrix
    var validNode = new Array(maxNodeId);

    for (var i = 0; i < maxNodeId; i++) validNode[i] = false;
    for (var i = 0; i < nodes.length; i++) validNode[nodes[i].id] = true;

    for (var i = 0; i < maxNodeId; i++) {
      adjMat[i] = [];
      M[i] = [];
      for (var j = 0; j < maxNodeId; j++)
        if (validNode[i] === true && validNode[j] === true) {
          adjMat[i][j] = "0";
          M[i][j] = 0;
        }
        else {
          adjMat[i][j] = "x";
          M[i][j] = -1;
        }
      M[i][i] = 0;
    }

    if (UNDIRECTED === true) {
      if (UNWEIGHTED === true) {
        for (var i = 0; i < links.length; i++) {
          adjMat[links[i].source.id][links[i].target.id] = "1";
          adjMat[links[i].target.id][links[i].source.id] = "1";
          M[links[i].source.id][links[i].target.id] = 1;
          M[links[i].target.id][links[i].source.id] = 1;
        }
      }
      else {
        for (var i = 0; i < links.length; i++) {
          adjMat[links[i].source.id][links[i].target.id] = links[i].weight.toString();
          adjMat[links[i].target.id][links[i].source.id] = links[i].weight.toString();
          M[links[i].source.id][links[i].target.id] = 1;
          M[links[i].target.id][links[i].source.id] = 1;
        }
      }
    }
    else {
      if (UNWEIGHTED === true) {
        for (var i = 0; i < links.length; i++) {
          adjMat[links[i].source.id][links[i].target.id] = "1";
          M[links[i].source.id][links[i].target.id] = 1;
        }
      }
      else {
        for (var i = 0; i < links.length; i++) {
          adjMat[links[i].source.id][links[i].target.id] = links[i].weight.toString();
          M[links[i].source.id][links[i].target.id] = 1;
        }
      }
    }

    // output adjMat to html
    d3.select("#adj_matrix_table").selectAll('tr').remove();
    var table1 = d3.select("#adj_matrix_table").select('tbody');

    // top
    var row = table1.append('tr');
    row.append('td').text(" ");

    for (var i = 0; i < maxNodeId; i++) row.append('td').text(i.toString()).attr('class', 'bold');

    for (var i = 0; i < maxNodeId; i++) {
      row = table1.append('tr');
      row.append('td').text(i.toString()).attr('class', 'bold');
      for (var j = 0; j < maxNodeId; j++) {
        if (adjMat[i][j] == "0") row.append('td').text(adjMat[i][j]).attr('class', 'red');
        else row.append('td').text(adjMat[i][j]);
      }
    }

    // output adjList to html
    d3.select("#adj_list_table").selectAll('tr').remove();
    var table2 = d3.select("#adj_list_table").select('tbody');

    for (var i = 0; i < maxNodeId; i++) {
      row = table2.append('tr');
      row.append('td').text(i.toString() + ": ").attr('class', 'bold');
      //for (var j = 0; j < adjList[i].length; j++) row.append('td').text(adjList[i][j]);
      if (UNWEIGHTED === true) {
        for (var j = 0; j < maxNodeId; j++)
          if (adjMat[i][j] == "1")
            row.append('td').text(j);
      }
      else {
        for (var j = 0; j < maxNodeId; j++)
          if ((adjMat[i][j] != "0") && (adjMat[i][j] != "x"))
            row.append('td').text("(" + j + ", " + adjMat[i][j] + ")");
      }
    }

    // output edgeList to html
    d3.select("#edge_list_table").selectAll('tr').remove();
    var table3 = d3.select("#edge_list_table").select('tbody');

    var counter = 0;
    for (var i = 0; i < maxNodeId; i++) {
      var start_j = 0;
      if (UNDIRECTED === true) start_j = i + 1; // to avoid bidirectional edges listed twice
      for (var j = start_j; j < maxNodeId; j++)
        if ((adjMat[i][j] != "0") && (adjMat[i][j] != "x")) {
          row = table3.append('tr');
          row.append('td').text(counter.toString() + ": ").attr('class', 'bold');
          counter++;
          row.append('td').text(i);
          row.append('td').text(j);
          if (UNWEIGHTED === false)
            row.append('td').text(adjMat[i][j]);
        }
    }

    var visited = new Array(10, false);

    function dfs(u) {
      visited[u] = true;
      for (var k = 0; k < nodes.length; k++)
        if ((adjMat[u][k] != "0") && (adjMat[u][k] != "x") && (visited[k] === false))
          dfs(k);
    }

    // #V and #E
    $("#VandE").text("V=" + countNode + ", E=" + countEdge);

    // IsTree
    if (UNDIRECTED === true) {
      var IsTree = (countEdge === countNode - 1); // first condition
      visited = new Array(10, false);
      for (var i = 0; i < nodes.length; i++) visited[i] = false;
      dfs(0);
      for (var i = 0; i < nodes.length; i++)
        if (visited[i] === false) {
          IsTree = false; // second condition
          break;
        }
      $("#isTree").text(IsTree ? "Yes" : "No");
    }
    else
      $("#isTree").text("N/A");

    // IsComplete
    if (UNDIRECTED === true)
      $("#isComplete").text((countEdge === (countNode*(countNode-1))/2) ? "Yes" : "No");
    else // twice as many compared to undirected version
      $("#isComplete").text((countEdge === countNode*(countNode-1)) ? "Yes" : "No");

    // IsBipartite
    if (UNDIRECTED === true) {
      var color = [];
      for (var i = 0; i < maxNodeId; i++) color[i] = -1;

      var IsBipartite = true;
      if (countNode === 0)
        IsBipartite = false;
      else {
        var q = [];
        q.push(nodes[0].id);
        while (q.length > 0) {
          var u = q.shift();
          for (var v = 0; v < maxNodeId; v++)
            if ((adjMat[u][v] != "0") && (adjMat[u][v] != "x")) {
              if (color[v] === -1) {
                color[v] = 1 - color[u];
                q.push(v);
              }
              else if (color[v] === color[u]) {
                IsBipartite = false;
                break;
              }
            }

          if (IsBipartite === false) break;
        }
      }
      $("#isBipartite").text(IsBipartite === true ? "Yes" : "No");
    }
    else
      $("#isBipartite").text("N/A");

    // IsDAG
    var IsDAG = true;
    if (UNDIRECTED === true)
      IsDAG = false;
    else {
      for (var k = 0; k < nodes.length; k++)
        for (var i = 0; i < nodes.length; i++)
          for (var j = 0; j < nodes.length; j++)
            if ((M[i][k] == 1) && (M[k][j] == 1))
              M[i][j] = 1;

      for (var i = 0; i < nodes.length; i++)
        if (M[i][i] == 1)
          IsDAG = false; // i can go out and come back to i... cycle
    }
    $("#isDAG").text(IsDAG === true ? "Yes" : "No");

    //isCross -md marker
    let isCross = false;
    for (let i = 0; i < links.length; i++) {
      let link = links[i];
      let lineA = {
        a: {
          x: link.source.x,
          y: link.source.y
        },
        b: {
          x: link.target.x,
          y: link.target.y
        }
      };
      for (let k = 0; k < links.length; k++) {
        if (k === i) {
          continue;
        }
        let anotherLink = links[k];
        let lineB = {
          a: {
            x: anotherLink.source.x,
            y: anotherLink.source.y
          },
          b: {
            x: anotherLink.target.x,
            y: anotherLink.target.y
          }
        };
        isCross = isIntersect(lineA, lineB);
        if (isCross) {
          // console.log("found cross");
          break;
        }
      }
      if (isCross) {
        break;
      }
    }
    // console.log(`is cross ${isCross}`);
    // console.log(`test is intersect ${isIntersect({a:{x:0,y:0},b:{x:10,y:10}},{a:{x:0,y:10},b:{x:10,y:0}})}`);
    // console.log(`test is intersect ${isIntersect({a:{x:0,y:0},b:{x:10,y:10}},{a:{x:0,y:0},b:{x:0,y:10}})}`);

    $('#isCross').text(isCross ? "Yes" : "No");
  }

  function isIntersect(lineA, lineB){
    return (((lineB.a.x-lineA.a.x)*(lineA.b.y-lineA.a.y) - (lineB.a.y-lineA.a.y)*(lineA.b.x-lineA.a.x)) * ((lineB.b.x-lineA.a.x)*(lineA.b.y-lineA.a.y) - (lineB.b.y-lineA.a.y)*(lineA.b.x-lineA.a.x)) < 0
    &&
    ((lineA.a.x-lineB.a.x)*(lineB.b.y-lineB.a.y) - (lineA.a.y-lineB.a.y)*(lineB.b.x-lineB.a.x)) * ((lineA.b.x-lineB.a.x)*(lineB.b.y-lineB.a.y) - (lineA.b.y-lineB.a.y)*(lineB.b.x-lineB.a.x)) < 0);
  }

  function arrowXY(x1, y1, x2, y2, t) {
    var dist = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));

    if (x1 === x2) {
      if (t === 1) return {x: x2 - 4, y: y2};
      else return {x: x2 + 4, y: y2};
    }

    if (y1 === y2) {
      if (t === 1) return {x: x2, y: y2 - 4};
      else return {x: x2, y: y2 + 4};
    }

    var m1 = (y2 - y1) / (x2 - x1);
    var c1 = y1 - m1 * x1;
    var m2 = -1 / m1;
    var c2 = y2 - m2 * x2;
    var d = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));

    var v = 4;
    d = d * d + v * v;
    var D = d;
    var z1 = c2 - y1;

    var a = 1 + m2 * m2;
    var b = 2 * m2 * z1 - 2 * x1;
    var c = x1 * x1 + z1 * z1 - D;

    var delta = b * b - 4 * a * c;

    delta = Math.sqrt(delta);

    var x_1 = (-b + delta) / (2 * a);
    var y_1 = m2 * x_1 + c2;

    var x_2 = (-b - delta) / (2 * a);
    var y_2 = m2 * x_2 + c2;

    if (t === 2) return {x: x_1, y: y_1};
    else return {x: x_2, y: y_2};
  }

  function weightXY(x1, y1, x2, y2, t, curve) {
    var dist = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));

    var x2 = (x1 + x2) / 2;
    var y2 = (y1 + y2) / 2;

    if (x1 === x2) {
      if (t === 2) return {x: x2 + 16, y: y2};
      else return {x: x2 - 16, y: y2};
    }

    if (y1 === y2) {
      if (t === 2) return {x: x2, y: y2 + 16};
      else return {x: x2, y: y2 - 16};
    }

    var m1 = (y2 - y1) / (x2 - x1);
    var c1 = y1 - m1 * x1;
    var m2 = -1 / m1;
    var c2 = y2 - m2 * x2;
    var d = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));

    var v = 16;
    if (curve === 1) v = 50;
    if (curve === 2) v = 18;

    d = d * d + v * v;
    var D = d;
    var z1 = c2 - y1;

    var a = 1 + m2 * m2;
    var b = 2 * m2 * z1 - 2 * x1;
    var c = x1 * x1 + z1 * z1 - D;

    var delta = b * b - 4 * a * c;

    delta = Math.sqrt(delta);

    var x_1 = (-b + delta) / (2 * a);
    var y_1 = m2 * x_1 + c2;

    var x_2 = (-b - delta) / (2 * a);
    var y_2 = m2 * x_2 + c2;

    if (t === 2) return {x: x_1, y: y_1};
    else return {x: x_2, y: y_2};
  }

  function mousedown() {
    svg.classed('active', true);
    if (d3.event.ctrlKey || mousedown_node || mousedown_link) return;

    // insert new node at point
    if (nodes.length === 10) {
      restart();
      svg
        .append('svg:g')
        .append('svg:text')
        .attr('x', 10)
        .attr('y', 20)
        .text('Sorry, you cannot have more than 10 vertices in this visualization...');
      return;
    }

    var point = d3.mouse(this), node = {id: lastNodeId};

    // find new last node ID
    countNodeId[lastNodeId]++;
    for (var i = 0; i < maxNumberVertex; i++)
      if (countNodeId[i] === 0) {
        lastNodeId = i;
        break;
      }
    node.x = point[0];
    node.y = point[1];

    node.x = parseInt(node.x) - parseInt(node.x) % grid;
    node.y = parseInt(node.y) - parseInt(node.y) % grid;

    nodes.push(node);
    restart();
  }

  function mousemove() {
    if (!mousedown_node) return;
    // update drag line
    drag_line.attr('d', 'M' + mousedown_node.x + ',' + mousedown_node.y + 'L' + d3.mouse(this)[0] + ',' + d3.mouse(this)[1]);
    restart();
  }

  function mouseup() {
    if (mousedown_node) drag_line.classed('hidden', true); // hide drag line
    // because :active only works in WebKit?
    svg.classed('active', false);
    // clear mouse event vars
    resetMouseVars();
  }

  function spliceLinksForNode(node) {
    var toSplice = links.filter(function (l) {
      return (l.source === node || l.target === node);
    });
    toSplice.map(function (l) {
      links.splice(links.indexOf(l), 1);
    });
  }

  var lastKeyDown = -1;

  var drag = d3
    .behavior
    .drag()
    .on("drag", function (d) {
      var dragTarget = d3.select(this).select('circle');
      var new_cx, new_cy;

      dragTarget
        .attr("cx", function () {
          new_cx = d3.mouse($("svg")[0])[0];
          return new_cx;
        })
        .attr("cy", function () {
          new_cy = d3.mouse($("svg")[0])[1];
          return new_cy;
        });

      d.x = new_cx;
      d.y = new_cy;

      d.x = parseInt(d.x) - parseInt(d.x) % grid;
      d.y = parseInt(d.y) - parseInt(d.y) % grid;

      restart();
    });

  function keydown() {
    // d3.event.preventDefault(); // no need to block this
    lastKeyDown = d3.event.keyCode;

    if (d3.event.keyCode === 17) { // ctrl
      circle.call(drag);
      svg.classed('ctrl', true);
    }

    if (!selected_node && !selected_link) return;

    switch (d3.event.keyCode) {
      case 46: // delete
        if (selected_node) {
          nodes.splice(nodes.indexOf(selected_node), 1);
          spliceLinksForNode(selected_node);
          countNodeId[selected_node.id] = 0;
          for (var i = 0; i < maxNumberVertex; i++)
            if (countNodeId[i] === 0) {
              lastNodeId = i;
              break;
            }
        }
        else if (selected_link)
          links.splice(links.indexOf(selected_link), 1);
        selected_link = null;
        selected_node = null;
        restart();
        break;
      case 13: // enter
        if (selected_link && UNWEIGHTED === false) {
          while (true) {
            var newWeight = prompt('Enter new weight: (&le; 99)');
            if (newWeight <= 99) break;
          }
          var idx = links.indexOf(selected_link);
          links[idx].weight = newWeight;
        }
        restart();
        break;
      }
  }

  function keyup() {
    lastKeyDown = -1;
    if (d3.event.keyCode === 17) { // ctrl
      circle
        .on('mousedown.drag', null)
        .on('touchstart.drag', null);
      svg
        .classed('ctrl', false);
    }
  }

  svg
    .on('mousedown', mousedown)
    .on('mousemove', mousemove)
    .on('mouseup', mouseup);
  d3.select(window)
    .on('keydown', keydown)
    .on('keyup', keyup);
  restart();
}
</script>
</body>
</html>
