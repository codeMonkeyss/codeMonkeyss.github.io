<!DOCTYPE html>
<html>
<head>
<title>Karel Reader</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<link rel="shortcut icon" href="../../favicon.ico" />
<script src="../../plugins/jquery.min.js"></script>

<link rel="stylesheet" href="../../plugins/bootstrap/css/bootstrap.min.css" />
<script src="../../plugins/bootstrap/js/bootstrap.min.js"></script>

<link rel="stylesheet" href="../../style.css" />

<script src="../../karel/js/html/websiteImports.js"></script>
<script>importCss();</script>
<script>importJs();</script>
</head>
<body>
  <!-- container -->
  <div class="bookContainer">
<!-- side bar -->
<div class="bookSideBar">
  <div class="homeLink">
    <a href="../../python/en/intro.html">
      <span class="glyphicon glyphicon-home" aria-hidden="true"></span>
      Karel
    </a>
  </div>
  <hr/>

  <div class="chapterTab" onclick="location.href='../../python/en/chapter1.html'">
    <a class="bookLink btn btn-link" href="../../python/en/chapter1.html">
      1 - Meet Karel
    </a>
  </div>
  <div class="chapterTab" onclick="location.href='../../python/en/chapter2.html'">
    <a class="bookLink btn btn-link" href="../../python/en/chapter2.html">2 - Programming</a>
  </div>
  <div class="chapterTab" onclick="location.href='../../python/en/chapter3.html'">
    <a class="bookLink btn btn-link" href="../../python/en/chapter3.html">3 - New Functions</a>
  </div>
  <div class="chapterTab" onclick="location.href='../../python/en/chapter4.html'">
    <a class="bookLink btn btn-link" href="../../python/en/chapter4.html">4 - Decomposition</a>
  </div>
  <div class="chapterTab" onclick="location.href='../../python/en/chapter5.html'">
    <a class="bookLink btn btn-link" href="../../python/en/chapter5.html">5 - For Loops</a>
  </div>
  <div class="chapterTab" onclick="location.href='../../python/en/chapter6.html'">
    <a class="bookLink btn btn-link" href="../../python/en/chapter6.html">6 - While Loops</a>
  </div>
  <div class="chapterTab" onclick="location.href='../../python/en/chapter7.html'">
    <a class="bookLink btn btn-link" href="../../python/en/chapter7.html">7 - Conditionals</a>
  </div>
  <div class="chapterTab" onclick="location.href='../../python/en/chapter8.html'">
    <a class="bookLink btn btn-link" href="../../python/en/chapter8.html">8 - Refinement</a>
  </div>
  <div class="chapterTab" onclick="location.href='../../python/en/chapter9.html'">
    <a class="bookLink btn btn-link" href="../../python/en/chapter9.html">9 - Extra Features</a>
  </div>

  <div class="chapterTab" onclick="location.href='../../python/en/reference.html'">
    <a class="bookLink btn btn-link" href="../../python/en/reference.html">10 - Reference</a>
  </div>

  <div class="chapterTab" onclick="location.href='../../python/en/ide.html'">
    <a class="bookLink btn btn-link" href="../../python/en/ide.html">11 - Code</a>
  </div>

  <hr/>

  <!--<a href="../../"><img style = "width:40px" src="../../images/unFlag.png"/> Learn more</a> -->

  <!-- <center>
    <img style ="width:75px;" src="../../images/stanford.png"/>
    </center> -->
</div>
    <!-- content -->
    <div class="bookContent" style="display: flex;">
      <!-- right gutter -->
      <div style="flex-grow:1;max-width:50px;"></div>

      <!-- main stuff -->
      <div class="" style="flex-basis:740px; max-width:740px; margin-left:20px; margin-right:20px">
      <div class="row">
        <div class="col-md-12 col-xs-12">

<h1>Chapter 3: Defining New Functions</h1>
<hr/>
<p>
  In the last chapter we wrote a program to help Karel climb a simple ledge:
</p>
<h3>Example: FirstKarel</h3>


<div class="section embeddedIde" id="beeperPickingRedux">
    <div id ='beeperPickingReduxIde' class = "ide getStarted" style="height:302.6px">
      <div id = 'beeperPickingReduxIdeCenter' class = "ideCenter" >
         <div id = 'beeperPickingReduxEditorDiv' class = 'ideEditorDiv' style="width:200px"></div>
         <div id = 'beeperPickingReduxCanvasDiv' class = 'ideCanvasDiv'>
            <canvas id='beeperPickingReduxCanvas' class = 'ideCanvas'></canvas>
            <div id='beeperPickingReduxTextDescriptionBox' class='ideTextDescriptionBox' style="display: none;">
              <p id='beeperPickingReduxInitialWorldDescription'></p>
              <ul id='beeperPickingReduxMovesList'></ul>
            </div>
         </div>
      </div>
    </div>
    <div style="width:100%;">
        <div class="buttonBar">
           <button class="btn btn-default" id="beeperPickingReduxRunButton"><span class="glyphicon glyphicon-play"></span> Run Program</button>
           <button class="btn btn-default" id="beeperPickingReduxTextDescriptionButton">Show Text Descriptions</button>
        </div>
    </div>
<script>



  function examplebeeperPickingRedux() {
    STARTER_CODE = `
# File: FirstKarel.py
# -----------------------------
# Karel picks up a beeper and places it on a ledge.
from karel.stanfordkarel import *
def main() :
   move()
   pick_beeper()
   move()
   turn_left()
   move()
   turn_left()
   turn_left()
   turn_left()
   move()
   move()
   put_beeper()
   move()    `
    // because of that extra endline at the start of the string
    STARTER_CODE = STARTER_CODE.trim();

    var karelIde = null;
    var karelEditor = null;
    var buttonState = 'play';
    var showTextDescription = false;

    function main() {
      karelEditor = importPythonEditor('beeperPickingReduxEditor','beeperPickingReduxEditorDiv', STARTER_CODE, false);
      //importRunButtonBar('example1ButtonBar');

      $("[title]").tooltip({ position: "bottom center", opacity: 0.9});

      initTabs();
      var canvas = document.getElementById('beeperPickingReduxCanvas');
      karelIde = KarelIde('python',karelEditor, canvas, 'stepUp', 0.8, 'en', 1000, 1000, initializeWorldTextDescription, appendMoveDescription, "There are walls in a rectangle near the bottom right corner around the positions in row 1 columns 4, 5, and 6.");

      $('#beeperPickingReduxRunButton').click(function(){playClicked()});
      $('#beeperPickingReduxTextDescriptionButton').click(function(){toggleTextDescription()});
      onresize();

    }

  function playClicked() {
    if(buttonState == 'play') {
      karelIde.playButton();

      var resetText = '<span class="glyphicon glyphicon-repeat"></span> Reset Program';
      $('#beeperPickingReduxRunButton').html(resetText);
      buttonState = 'reset';
    } else if (buttonState == 'reset') {
      karelIde.stopButton();
      clearMovesList(); // resets text description to description of initial state only
      var playText = '<span class="glyphicon glyphicon-play"></span> Run Program';
      $('#beeperPickingReduxRunButton').html(playText);
      buttonState = 'play';
    }

  }

  function toggleTextDescription() {
    $('#beeperPickingReduxCanvas').toggle();
    $('#beeperPickingReduxTextDescriptionBox').toggle();

    if(!showTextDescription) {
      // text description is currently hidden; toggle button should hide canvas and show text description div
      $('#beeperPickingReduxTextDescriptionButton').text('Show Canvas');
      showTextDescription = true;
    } else {
      // text description is currently showing; toggle button should hide text and show canvas
      $('#beeperPickingReduxTextDescriptionButton').text('Show Text Descriptions');
      showTextDescription = false;
    }
  }

  function initializeWorldTextDescription(worldText) {
    $('#beeperPickingReduxInitialWorldDescription').html(worldText);
  }

  function appendMoveDescription(moveText) {
    $('#beeperPickingReduxMovesList').append(`<li>${moveText}</li>`);
  }

  function clearMovesList() {
    $('#beeperPickingReduxMovesList').empty();
  }

  function onresize() {
    var parentHeight = 302.6;
    var canvasWidth = 300
    var parentWidth = $("#beeperPickingRedux").width();
    console.log('pw: ' + parentWidth);

    var ide = document.getElementById('beeperPickingReduxIde');
    var editorDiv = document.getElementById('beeperPickingReduxEditorDiv');
    var canvas = document.getElementById('beeperPickingReduxCanvasDiv');

    var ideHeight = parentHeight
    var centerHeight = ideHeight;

    var availibleWidth = parentWidth;
    var elementSpacing = 12;

    var editorWidth = availibleWidth - canvasWidth - elementSpacing;

    canvas.style.width = canvasWidth + 'px';
    canvas.style.height = canvasWidth + 'px';
    canvas.style.left = (editorWidth + elementSpacing) + 'px';



    editorDiv.style.left = 0 + 'px'
    editorDiv.style.width = editorWidth + 'px';
    editorDiv.style.height = parentHeight + 'px';
    console.log('editor width: ' + editorWidth)

    if (karelEditor) {
      karelEditor.renderer.onResize();
    }
  }
  main()

  }
  examplebeeperPickingRedux();
</script>
</div>

<p>
Even though the <code>FirstKarel</code> program above demonstrates that it is possible to perform the <code>turn_right()</code> operation using only Karelâ€™s built-in commands, the resulting program is not particularly clear conceptually. In your mental design of the program, Karel turns right when it reaches the top of the ledge. The fact that you have to use three <code>turn_left()</code> commands to do so is annoying. It would be much simpler if you could simply say <code>turn_right()</code> and have Karel understand this command. The resulting program would not only be shorter and easier to write, but also significantly easier to read.
</p>
<h3>Defining New Commands</h3>
<p>
Fortunately, the Karel programming language makes it possible to define new commands simply by including new function definitions. Whenever you have a sequence of Karel commands that performs some useful task--such as turning right--you can define a new function that executes that sequence of commands. The format for defining a new Karel function has much the same as the definition of <code>main()</code> in the preceding examples, which is a function definition in its own right. A typical function definition looks like this:
</p>

<p class="demoCode" style="margin-left:10px">
<code>&nbsp;&nbsp;&nbsp;<span class="keyword">def</span> </code><i class="demoText">name</i><code>():</code><br/>
<i class="demoText" style="margin-left:3.5em">commands that make up the body of the function</i><br/>
</p>

<p>
In this pattern, name represents the name you have chosen for the new function. To complete the definition, all you have to do is provide the sequence of commands in the lines after the colon, which are all indented by one tab. For example, you can define<code>turn_right()</code> as follows:
</p>


<p class="demoCode" style="margin-left:10px">
<code>&nbsp;&nbsp;&nbsp;<span class="keyword">def</span> turn_right():</code><br/>
<code style="margin-left:3.5em">turn_left()</code><br/>
<code style="margin-left:3.5em">turn_left()</code><br/>
<code style="margin-left:3.5em">turn_left()</code><br/>
</p>

<p>
Similarly, you could define a new <code>turn_around()</code> function like this:
</p>

<p class="demoCode" style="margin-left:10px">
<code>&nbsp;&nbsp;&nbsp;<span class="keyword">def</span> turn_around():</code><br/>
<code style="margin-left:3.5em">turn_left()</code><br/>
<code style="margin-left:3.5em">turn_left()</code><br/>
</p>

<p>
You can use the name of a new function just like any of Karelâ€™s built-in commands. For example, once you have defined <code>turn_right()</code>, you could replace the three <code>turn_left()</code> commands in the program with a single call to the <code>turn_right()</code> function. Here is a revised implementation of the program that uses <code>turn_right()</code>:
</p>


<div class="section embeddedIde" id="stepUp2">
    <div id ='stepUp2Ide' class = "ide getStarted" style="height:409.40000000000003px">
      <div id = 'stepUp2IdeCenter' class = "ideCenter" >
         <div id = 'stepUp2EditorDiv' class = 'ideEditorDiv' style="width:200px"></div>
         <div id = 'stepUp2CanvasDiv' class = 'ideCanvasDiv'>
            <canvas id='stepUp2Canvas' class = 'ideCanvas'></canvas>
            <div id='stepUp2TextDescriptionBox' class='ideTextDescriptionBox' style="display: none;">
              <p id='stepUp2InitialWorldDescription'></p>
              <ul id='stepUp2MovesList'></ul>
            </div>
         </div>
      </div>
    </div>
    <div style="width:100%;">
        <div class="buttonBar">
           <button class="btn btn-default" id="stepUp2RunButton"><span class="glyphicon glyphicon-play"></span> Run Program</button>
           <button class="btn btn-default" id="stepUp2TextDescriptionButton">Show Text Descriptions</button>
        </div>
    </div>
<script>



  function examplestepUp2() {
    STARTER_CODE = `
# File: BeeperPickingKarel.py
# -----------------------------
# The BeeperPickingKarel program defines a "main"
# function with three commands. These commands cause
# Karel to move forward one block, pick up a
# beeper and then move ahead to the next corner.
from karel.stanfordkarel import *
def main():
   move()
   pick_beeper()
   move()
   turn_left()
   move()
   turn_right()
   move()
   move()
   put_beeper()
   move()

def turn_right():
   turn_left()
   turn_left()
   turn_left()    `
    // because of that extra endline at the start of the string
    STARTER_CODE = STARTER_CODE.trim();

    var karelIde = null;
    var karelEditor = null;
    var buttonState = 'play';
    var showTextDescription = false;

    function main() {
      karelEditor = importPythonEditor('stepUp2Editor','stepUp2EditorDiv', STARTER_CODE, false);
      //importRunButtonBar('example1ButtonBar');

      $("[title]").tooltip({ position: "bottom center", opacity: 0.9});

      initTabs();
      var canvas = document.getElementById('stepUp2Canvas');
      karelIde = KarelIde('python',karelEditor, canvas, 'stepUp', 0.0, 'en', 1000, 1000, initializeWorldTextDescription, appendMoveDescription, "There are walls in a rectangle near the bottom right corner around the positions in row 1 columns 4, 5, and 6.");

      $('#stepUp2RunButton').click(function(){playClicked()});
      $('#stepUp2TextDescriptionButton').click(function(){toggleTextDescription()});
      onresize();

    }

  function playClicked() {
    if(buttonState == 'play') {
      karelIde.playButton();

      var resetText = '<span class="glyphicon glyphicon-repeat"></span> Reset Program';
      $('#stepUp2RunButton').html(resetText);
      buttonState = 'reset';
    } else if (buttonState == 'reset') {
      karelIde.stopButton();
      clearMovesList(); // resets text description to description of initial state only
      var playText = '<span class="glyphicon glyphicon-play"></span> Run Program';
      $('#stepUp2RunButton').html(playText);
      buttonState = 'play';
    }

  }

  function toggleTextDescription() {
    $('#stepUp2Canvas').toggle();
    $('#stepUp2TextDescriptionBox').toggle();

    if(!showTextDescription) {
      // text description is currently hidden; toggle button should hide canvas and show text description div
      $('#stepUp2TextDescriptionButton').text('Show Canvas');
      showTextDescription = true;
    } else {
      // text description is currently showing; toggle button should hide text and show canvas
      $('#stepUp2TextDescriptionButton').text('Show Text Descriptions');
      showTextDescription = false;
    }
  }

  function initializeWorldTextDescription(worldText) {
    $('#stepUp2InitialWorldDescription').html(worldText);
  }

  function appendMoveDescription(moveText) {
    $('#stepUp2MovesList').append(`<li>${moveText}</li>`);
  }

  function clearMovesList() {
    $('#stepUp2MovesList').empty();
  }

  function onresize() {
    var parentHeight = 409.40000000000003;
    var canvasWidth = 300
    var parentWidth = $("#stepUp2").width();
    console.log('pw: ' + parentWidth);

    var ide = document.getElementById('stepUp2Ide');
    var editorDiv = document.getElementById('stepUp2EditorDiv');
    var canvas = document.getElementById('stepUp2CanvasDiv');

    var ideHeight = parentHeight
    var centerHeight = ideHeight;

    var availibleWidth = parentWidth;
    var elementSpacing = 12;

    var editorWidth = availibleWidth - canvasWidth - elementSpacing;

    canvas.style.width = canvasWidth + 'px';
    canvas.style.height = canvasWidth + 'px';
    canvas.style.left = (editorWidth + elementSpacing) + 'px';



    editorDiv.style.left = 0 + 'px'
    editorDiv.style.width = editorWidth + 'px';
    editorDiv.style.height = parentHeight + 'px';
    console.log('editor width: ' + editorWidth)

    if (karelEditor) {
      karelEditor.renderer.onResize();
    }
  }
  main()

  }
  examplestepUp2();
</script>
</div>

<h3>Function Code Blocks</h3>
<p>
  A group of commands follow the colon <code translate="no">:</code> which are indented, is called a <b>code block</b>. The body of your function is a code block. Notice how the contents of a code block are all indented one tab in. This is important functionally since it allows Python to know what lines of code are in a given block.
</p>

<p>You can define as many functions as you want. They should all be written one after another. You can't define a function inside another function. </p>
<hr/>
<center>
  <a class="btn btn-primary btn-lg" href="chapter4.html" role="button">Next Chapter</a>
</center>
</p>

<div style="height:60px"></div>        </div>
      </div>

      </div>
      <!-- right gutter -->
      <div style="flex-grow:4"></div>
    </div>
  </div>
</body>
</html>
